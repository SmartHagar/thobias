(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2817],{256:function(e,t,a){Promise.resolve().then(a.bind(a,7035))},7035:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var r=a(7437),s=a(2265),n=a(1971),o=a(8745),i=a(9376),l=a(8946),d=a.n(l),u=a(7984),c=e=>{let{setDelete:t,setEdit:a}=e,{setSubCategories:l,dtSubCategories:c}=(0,u.Z)(),[g,h]=(0,s.useState)(1),[p,m]=(0,s.useState)(10),[b,v]=(0,s.useState)(!0),f=(0,i.useSearchParams)(),S=(null==f?void 0:f.get("sortby"))||"",C=(null==f?void 0:f.get("order"))||"",_=(null==f?void 0:f.get("cari"))||"",x=d().debounce(e=>{e()},500),y=(0,s.useCallback)(async()=>{m(10),await l({page:g,limit:p,search:_,sortby:S,order:C}),v(!1)},[l,g,p,_,S,C]);return(0,s.useEffect)(()=>(x(y),()=>{x.cancel()}),[_,S,C,g,p]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:b?(0,r.jsx)("span",{className:"loading loading-spinner loading-lg"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(o.Z,{headTable:["No","Kategori","Sub Kategori","Aksi"],tableBodies:["category.category_nm","sub_category_nm"],dataTable:null==c?void 0:c.data,page:g,limit:p,setEdit:a,setDelete:t,ubah:!0,hapus:!0})}),(null==c?void 0:c.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n.Z,{currentPage:null==c?void 0:c.current_page,totalPages:null==c?void 0:c.last_page,setPage:h})})]})})},g=a(6433),h=a(9064),p=a(543),m=a(2841),b=a(1400),v=e=>{let{register:t,setValue:a,watch:s,halaman:n}=e;return(0,r.jsx)("div",{className:"grid grid-cols-8 gap-2 w-full",children:(0,r.jsx)(b.Z,{watch:s,setValue:a,name:"cari",register:t,placeholder:"Cari data ".concat(n),addClass:"col-span-8"})})},f=a(9501),S=a(1505),C=a(9762),_=a(9181),x=a(1721),y=e=>{let{register:t,errors:a,showModal:n,control:o}=e,{setCategories:i,dtCategories:l}=(0,x.Z)(),[d,u]=(0,s.useState)(!0),c=(0,s.useCallback)(async()=>{u(!0),await i({page:1,limit:10}),u(!1)},[i]);return(0,s.useEffect)(()=>{c()},[n]),(0,r.jsxs)(r.Fragment,{children:[!d&&(0,r.jsx)(_.Z,{label:"Kategori",placeholder:"Pilih Kategori",name:"category_id",dataDb:l.data,body:["id","category_nm"],control:o,required:!0,errors:a.category_id,addClass:"lg:col-span-4 col-span-8 text-black relative",menuPortalTarget:!0}),(0,r.jsx)(S.Z,{label:"Sub Kategori",name:"sub_category_nm",register:t,errors:a.sub_category_nm,required:!0,addClass:"lg:col-span-4 col-span-8"})]})},j=a(7550),w=e=>{let{showModal:t,setShowModal:a,dtEdit:n,halaman:o}=e,{addData:i,updateData:l}=(0,u.Z)(),[d,c]=(0,s.useState)(!1),{register:g,handleSubmit:h,setValue:m,control:b,formState:{errors:v},watch:_}=(0,f.cI)(),x=()=>{m("id",""),m("category_id",""),m("sub_category_nm","")};(0,s.useEffect)(()=>{n?(m("id",n.id),m("category_id",n.category_id),m("sub_category_nm",n.sub_category_nm)):x()},[t,n]);let w=async e=>{(0,j.Z)({row:e,dtEdit:n,setIsLoading:c,setShowModal:a,addData:i,updateData:l,resetForm:x,toastShow:p.Z})};return(0,r.jsx)(C.Z,{title:"Form ".concat(o),showModal:t,setShowModal:a,width:"md:w-[50rem] lg:w-[65rem]",children:(0,r.jsxs)("form",{onSubmit:h(w),children:[(0,r.jsx)(S.Z,{name:"id",register:g,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-8 gap-2 mb-4",children:(0,r.jsx)(y,{register:g,errors:v,dtEdit:n,control:b,watch:_,setValue:m,showModal:t})}),(0,r.jsx)("div",{children:d?(0,r.jsx)("span",{className:"loading loading-spinner loading-lg"}):(0,r.jsx)("button",{className:"btn btn-primary",onClick:h(w),type:"submit",children:"Simpan"})})]})})},Z=()=>{let e="Sub Kategori",{setWelcome:t}=(0,m.I)();(0,s.useEffect)(()=>(t("Halaman ".concat(e)),()=>{}),[t]);let{removeData:a}=(0,u.Z)(),[n,o]=(0,s.useState)(!1),[i,l]=(0,s.useState)(!1),[d,b]=(0,s.useState)(),[S,C]=(0,s.useState)(),_=async e=>{let{id:t,isDelete:r}=e;if(b(t),r){let{data:e}=await a(d);(0,p.Z)({event:e}),l(!1)}else l(!0)},{register:x,setValue:y,watch:j,control:Z}=(0,f.cI)();return(0,r.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h.x7,{}),(0,r.jsx)(w,{dtEdit:null!=S?S:null,showModal:n,setShowModal:o,halaman:e}),(0,r.jsx)(g.Z,{showDel:i,setShowDel:l,setDelete:_}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsxs)("p",{children:["Silahkan Mengolah data ",e]}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>{o(!0),C(null)},children:"Tambah Data"})]})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(v,{halaman:e,register:x,setValue:y,watch:j,control:Z})}),(0,r.jsx)(s.Suspense,{children:(0,r.jsx)(c,{setDelete:_,setEdit:e=>{o(!0),C(e)}})})]})}},9181:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var r=a(7437),s=a(1119),n=a(2265),o=a(9448),i=a(1434),l=a(1993),d=a(1686),u=a(7673),c=a(6989),g=a(6083),h=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];a(4887),a(7935);var p=(0,n.forwardRef)(function(e,t){var a,r,p,m,b,v,f,S,C,_,x,y,j,w,Z,k,N,T,P,A,E,O,D,z,B,L,M,F,I,V,K,R,U,q,W,H,Q,G,J,X,Y,$,ee,et,ea,er,es,en,eo,ei,el,ed=(r=void 0!==(a=e.defaultOptions)&&a,m=void 0!==(p=e.cacheOptions)&&p,b=e.loadOptions,e.options,v=e.isLoading,f=e.onInputChange,S=e.filterOption,_=(C=(0,c.Z)(e,h)).inputValue,x=(0,n.useRef)(void 0),y=(0,n.useRef)(!1),j=(0,n.useState)(Array.isArray(r)?r:void 0),Z=(w=(0,u.Z)(j,2))[0],k=w[1],N=(0,n.useState)(void 0!==_?_:""),P=(T=(0,u.Z)(N,2))[0],A=T[1],E=(0,n.useState)(!0===r),D=(O=(0,u.Z)(E,2))[0],z=O[1],B=(0,n.useState)(void 0),M=(L=(0,u.Z)(B,2))[0],F=L[1],I=(0,n.useState)([]),K=(V=(0,u.Z)(I,2))[0],R=V[1],U=(0,n.useState)(!1),W=(q=(0,u.Z)(U,2))[0],H=q[1],Q=(0,n.useState)({}),J=(G=(0,u.Z)(Q,2))[0],X=G[1],Y=(0,n.useState)(void 0),ee=($=(0,u.Z)(Y,2))[0],et=$[1],ea=(0,n.useState)(void 0),es=(er=(0,u.Z)(ea,2))[0],en=er[1],m!==es&&(X({}),en(m)),r!==ee&&(k(Array.isArray(r)?r:void 0),et(r)),(0,n.useEffect)(function(){return y.current=!0,function(){y.current=!1}},[]),eo=(0,n.useCallback)(function(e,t){if(!b)return t();var a=b(e,t);a&&"function"==typeof a.then&&a.then(t,function(){return t()})},[b]),(0,n.useEffect)(function(){!0===r&&eo(P,function(e){y.current&&(k(e||[]),z(!!x.current))})},[]),ei=(0,n.useCallback)(function(e,t){var a=(0,g.L)(e,t,f);if(!a){x.current=void 0,A(""),F(""),R([]),z(!1),H(!1);return}if(m&&J[a])A(a),F(a),R(J[a]),z(!1),H(!1);else{var r=x.current={};A(a),z(!0),H(!M),eo(a,function(e){y&&r===x.current&&(x.current=void 0,z(!1),F(a),R(e||[]),H(!1),X(e?(0,d.Z)((0,d.Z)({},J),{},(0,l.Z)({},a,e)):J))})}},[m,eo,M,J,f]),el=W?[]:P&&M?K:Z||[],(0,d.Z)((0,d.Z)({},C),{},{options:el,isLoading:D||void 0!==v&&v,onInputChange:ei,filterOption:void 0===S?null:S})),eu=(0,i.u)(ed);return n.createElement(o.S,(0,s.Z)({ref:t},eu))}),m=a(9501),b=e=>{let{dataDb:t,body:a,control:s,required:n,name:o,errors:i,placeholder:l,addClass:d,label:u,defaultOptions:c=!0,menuPosition:g="fixed",menuPortalTarget:h=!1}=e,b={menuPortal:e=>({...e,zIndex:9999,pointerEvents:"auto"}),multiValue:(e,t)=>t.data.isFixed?{...e,backgroundColor:"gray"}:e,multiValueLabel:(e,t)=>t.data.isFixed?{...e,fontWeight:"bold",color:"white",paddingRight:6}:e,multiValueRemove:(e,t)=>t.data.isFixed?{...e,display:"none"}:e},v=(e,t)=>{let a=e[t];if("id"===t)return{value:a,label:""};if("NPM_FULL"===t){var r;let t=null==e?void 0:null===(r=e.thn_angkatan)||void 0===r?void 0:r.substring(2),a=e.prodi,s=e.NPM,n="".concat(a.kode).concat(t.substring(2)).concat(s);return{value:e.NPM,label:n}}if(!t.includes("."))return{value:"",label:a};{let[a,...r]=t.split(".");return v(e[a],r.join("."))}},f=()=>t&&t.map(e=>{let t=a.map(t=>v(e,t)),r=t.map(e=>e.label).filter(e=>""!==e),s=r.join(r.length>1?" - ":"");return{value:t.find(e=>""!==e.value).value,label:s}}),S=e=>{var t;return null===(t=f())||void 0===t?void 0:t.filter(t=>t.label.toLowerCase().includes(e.toLowerCase()))},C=(e,t)=>{setTimeout(()=>{t(S(e))},1e3)};return(0,r.jsxs)("div",{className:d,children:[u&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-black tracking-wide",children:u}),n&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)(m.Qr,{name:o,control:s,rules:{required:n},render:e=>{var t;let{field:{onChange:a,value:s,ref:n}}=e;return(0,r.jsx)(p,{cacheOptions:!0,defaultOptions:c,isClearable:!0,isSearchable:!0,loadOptions:C,placeholder:l,menuPlacement:"auto",menuPosition:g,menuPortalTarget:h?document.body:null,styles:b,ref:n,value:(null===(t=f())||void 0===t?void 0:t.find(e=>e.value===s))||null,onChange:e=>a(e?e.value:e)})}}),(null==i?void 0:i.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[u," tidak boleh kosong"]})]})}},1721:function(e,t,a){"use strict";var r=a(3011),s=a(6885),n=a(4061),o=a(4010);let i=(0,r.U)((0,s.mW)(e=>({dtCategories:{last_page:0,current_page:0,data:[]},setCategories:async t=>{let{page:a=1,limit:r=10,search:s,sortby:i,order:l}=t;try{let t=await o.Z.getState().setToken(),d=await (0,n.Sj)({method:"get",url:"/categories",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:a,search:s,sortby:i,order:l}});return e(e=>({...e,dtCategories:d.data.data})),console.log({response:d}),{status:"berhasil",data:d.data}}catch(e){var d;return{status:"error",error:null===(d=e.response)||void 0===d?void 0:d.data}}},setShowCategories:async t=>{try{let a=await o.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/categories/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({...e,dtCategories:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var a;return{status:"error",error:null===(a=e.response)||void 0===a?void 0:a.data}}},addData:async t=>{try{let a=await o.Z.getState().setToken(),r=await (0,n.Sj)({method:"post",url:"/categories",headers:{Authorization:"Bearer ".concat(a)},data:t});return e(e=>({dtCategories:{last_page:e.dtCategories.last_page,current_page:e.dtCategories.current_page,data:[r.data.data,...e.dtCategories.data]}})),{status:"berhasil tambah",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async t=>{try{let a=await o.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/categories/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({dtCategories:{last_page:e.dtCategories.last_page,current_page:e.dtCategories.current_page,data:e.dtCategories.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,a)=>{try{let r=await o.Z.getState().setToken(),s=await (0,n.Sj)({method:"PUT",url:"/categories/".concat(t),headers:{Authorization:"Bearer ".concat(r)},data:a});return e(e=>({dtCategories:{last_page:e.dtCategories.last_page,current_page:e.dtCategories.current_page,data:e.dtCategories.data.map(e=>e.id===t?{...e,...s.data.data}:e)}})),{status:"berhasil update",data:s.data}}catch(e){return{status:"error",data:e.response.data}}}})));t.Z=i},7984:function(e,t,a){"use strict";var r=a(3011),s=a(6885),n=a(4061),o=a(4010);let i=(0,r.U)((0,s.mW)(e=>({dtSubCategories:{last_page:0,current_page:0,data:[]},setSubCategories:async t=>{let{page:a=1,limit:r=10,search:s,sortby:i,order:l}=t;try{let t=await o.Z.getState().setToken(),d=await (0,n.Sj)({method:"get",url:"/subCategories",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:a,search:s,sortby:i,order:l}});return e(e=>({...e,dtSubCategories:d.data.data})),console.log({response:d}),{status:"berhasil",data:d.data}}catch(e){var d;return{status:"error",error:null===(d=e.response)||void 0===d?void 0:d.data}}},setShowSubCategories:async t=>{try{let a=await o.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/subCategories/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({...e,dtSubCategories:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var a;return{status:"error",error:null===(a=e.response)||void 0===a?void 0:a.data}}},addData:async t=>{try{let a=await o.Z.getState().setToken(),r=await (0,n.Sj)({method:"post",url:"/subCategories",headers:{Authorization:"Bearer ".concat(a)},data:t});return e(e=>({dtSubCategories:{last_page:e.dtSubCategories.last_page,current_page:e.dtSubCategories.current_page,data:[r.data.data,...e.dtSubCategories.data]}})),{status:"berhasil tambah",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async t=>{try{let a=await o.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/subCategories/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({dtSubCategories:{last_page:e.dtSubCategories.last_page,current_page:e.dtSubCategories.current_page,data:e.dtSubCategories.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,a)=>{try{let r=await o.Z.getState().setToken(),s=await (0,n.Sj)({method:"PUT",url:"/subCategories/".concat(t),headers:{Authorization:"Bearer ".concat(r)},data:a});return e(e=>({dtSubCategories:{last_page:e.dtSubCategories.last_page,current_page:e.dtSubCategories.current_page,data:e.dtSubCategories.data.map(e=>e.id===t?{...e,...s.data.data}:e)}})),{status:"berhasil update",data:s.data}}catch(e){return{status:"error",data:e.response.data}}}})));t.Z=i}},function(e){e.O(0,[1779,1866,6990,310,8295,9501,9099,8848,4285,9264,2971,2117,1744],function(){return e(e.s=256)}),_N_E=e.O()}]);