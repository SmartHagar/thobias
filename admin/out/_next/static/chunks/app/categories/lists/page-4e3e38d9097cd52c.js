(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2673],{5711:function(a,e,t){Promise.resolve().then(t.bind(t,7413))},7413:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return y}});var s=t(7437),r=t(2265),l=t(1971),n=t(8745),d=t(9376),i=t(8946),o=t.n(i),c=t(1721),u=a=>{let{setDelete:e,setEdit:t}=a,{setCategories:i,dtCategories:u}=(0,c.Z)(),[g,h]=(0,r.useState)(1),[m,p]=(0,r.useState)(10),[x,j]=(0,r.useState)(!0),w=(0,d.useSearchParams)(),f=(null==w?void 0:w.get("sortby"))||"",b=(null==w?void 0:w.get("order"))||"",v=(null==w?void 0:w.get("cari"))||"",S=o().debounce(a=>{a()},500),_=(0,r.useCallback)(async()=>{p(10),await i({page:g,limit:m,search:v,sortby:f,order:b}),j(!1)},[i,g,m,v,f,b]);return(0,r.useEffect)(()=>(S(_),()=>{S.cancel()}),[v,f,b,g,m]),(0,s.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:x?(0,s.jsx)("span",{className:"loading loading-spinner loading-lg"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(n.Z,{headTable:["No","Nama","Aksi"],tableBodies:["category_nm"],dataTable:null==u?void 0:u.data,page:g,limit:m,setEdit:t,setDelete:e,ubah:!0,hapus:!0})}),(null==u?void 0:u.last_page)>1&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(l.Z,{currentPage:null==u?void 0:u.current_page,totalPages:null==u?void 0:u.last_page,setPage:h})})]})})},g=t(6433),h=t(9064),m=t(543),p=t(2841),x=t(1400),j=a=>{let{register:e,setValue:t,watch:r,halaman:l}=a;return(0,s.jsx)("div",{className:"grid grid-cols-8 gap-2 w-full",children:(0,s.jsx)(x.Z,{watch:r,setValue:t,name:"cari",register:e,placeholder:"Cari data ".concat(l),addClass:"col-span-8"})})},w=t(9501),f=t(1505),b=t(9762),v=a=>{let{register:e,errors:t}=a;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.Z,{label:"Nama Kategori",name:"category_nm",register:e,errors:t.category_nm,required:!0,addClass:"col-span-8"})})},S=t(7550),_=a=>{let{showModal:e,setShowModal:t,dtEdit:l,halaman:n}=a,{addData:d,updateData:i}=(0,c.Z)(),[o,u]=(0,r.useState)(!1),{register:g,handleSubmit:h,setValue:p,control:x,formState:{errors:j},watch:_}=(0,w.cI)(),y=()=>{p("id",""),p("category_nm","")};(0,r.useEffect)(()=>{l?(p("id",l.id),p("category_nm",l.category_nm)):y()},[e,l]);let C=async a=>{(0,S.Z)({row:a,dtEdit:l,setIsLoading:u,setShowModal:t,addData:d,updateData:i,resetForm:y,toastShow:m.Z})};return(0,s.jsx)(b.Z,{title:"Form ".concat(n),showModal:e,setShowModal:t,width:"md:w-[50rem] lg:w-[65rem]",children:(0,s.jsxs)("form",{onSubmit:h(C),children:[(0,s.jsx)(f.Z,{name:"id",register:g,type:"hidden"}),(0,s.jsx)("div",{className:"grid grid-cols-8 gap-2 mb-4",children:(0,s.jsx)(v,{register:g,errors:j,dtEdit:l,control:x,watch:_,setValue:p,showModal:e})}),(0,s.jsx)("div",{children:o?(0,s.jsx)("span",{className:"loading loading-spinner loading-lg"}):(0,s.jsx)("button",{className:"btn btn-primary",onClick:h(C),type:"submit",children:"Simpan"})})]})})},y=()=>{let a="Kategori",{setWelcome:e}=(0,p.I)();(0,r.useEffect)(()=>(e("Halaman ".concat(a)),()=>{}),[e]);let{removeData:t}=(0,c.Z)(),[l,n]=(0,r.useState)(!1),[d,i]=(0,r.useState)(!1),[o,x]=(0,r.useState)(),[f,b]=(0,r.useState)(),v=async a=>{let{id:e,isDelete:s}=a;if(x(e),s){let{data:a}=await t(o);(0,m.Z)({event:a}),i(!1)}else i(!0)},{register:S,setValue:y,watch:C,control:Z}=(0,w.cI)();return(0,s.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.x7,{}),(0,s.jsx)(_,{dtEdit:null!=f?f:null,showModal:l,setShowModal:n,halaman:a}),(0,s.jsx)(g.Z,{showDel:d,setShowDel:i,setDelete:v}),(0,s.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,s.jsxs)("p",{children:["Silahkan Mengolah data ",a]}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{n(!0),b(null)},children:"Tambah Data"})]})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(j,{halaman:a,register:S,setValue:y,watch:C,control:Z})}),(0,s.jsx)(r.Suspense,{children:(0,s.jsx)(u,{setDelete:v,setEdit:a=>{n(!0),b(a)}})})]})}},1721:function(a,e,t){"use strict";var s=t(3011),r=t(6885),l=t(4061),n=t(4010);let d=(0,s.U)((0,r.mW)(a=>({dtCategories:{last_page:0,current_page:0,data:[]},setCategories:async e=>{let{page:t=1,limit:s=10,search:r,sortby:d,order:i}=e;try{let e=await n.Z.getState().setToken(),o=await (0,l.Sj)({method:"get",url:"/categories",headers:{Authorization:"Bearer ".concat(e)},params:{limit:s,page:t,search:r,sortby:d,order:i}});return a(a=>({...a,dtCategories:o.data.data})),console.log({response:o}),{status:"berhasil",data:o.data}}catch(a){var o;return{status:"error",error:null===(o=a.response)||void 0===o?void 0:o.data}}},setShowCategories:async e=>{try{let t=await n.Z.getState().setToken(),s=await (0,l.Sj)({method:"get",url:"/categories/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({...a,dtCategories:s.data.data})),{status:"berhasil",data:s.data}}catch(a){var t;return{status:"error",error:null===(t=a.response)||void 0===t?void 0:t.data}}},addData:async e=>{try{let t=await n.Z.getState().setToken(),s=await (0,l.Sj)({method:"post",url:"/categories",headers:{Authorization:"Bearer ".concat(t)},data:e});return a(a=>({dtCategories:{last_page:a.dtCategories.last_page,current_page:a.dtCategories.current_page,data:[s.data.data,...a.dtCategories.data]}})),{status:"berhasil tambah",data:s.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await n.Z.getState().setToken(),s=await (0,l.Sj)({method:"delete",url:"/categories/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({dtCategories:{last_page:a.dtCategories.last_page,current_page:a.dtCategories.current_page,data:a.dtCategories.data.filter(a=>a.id!==e)}})),{status:"berhasil hapus",data:s.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(e,t)=>{try{let s=await n.Z.getState().setToken(),r=await (0,l.Sj)({method:"PUT",url:"/categories/".concat(e),headers:{Authorization:"Bearer ".concat(s)},data:t});return a(a=>({dtCategories:{last_page:a.dtCategories.last_page,current_page:a.dtCategories.current_page,data:a.dtCategories.data.map(a=>a.id===e?{...a,...r.data.data}:a)}})),{status:"berhasil update",data:r.data}}catch(a){return{status:"error",data:a.response.data}}}})));e.Z=d}},function(a){a.O(0,[1779,1866,6990,4579,9501,9099,8848,9264,2971,2117,1744],function(){return a(a.s=5711)}),_N_E=a.O()}]);