(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7032],{3973:function(t,a,e){Promise.resolve().then(e.bind(e,6727))},6727:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return T}});var r=e(7437),s=e(2265),i=e(1971),l=e(8745),n=e(9376),d=e(8946),o=e.n(d),u=e(3011),c=e(6885),h=e(4061),g=e(4010);let p=(0,u.U)((0,c.mW)(t=>({dtVillage:{last_page:0,current_page:0,data:[]},setVillage:async a=>{let{page:e=1,limit:r=10,search:s,sortby:i,order:l}=a;try{let a=await g.Z.getState().setToken(),n=await (0,h.Sj)({method:"get",url:"/villages",headers:{Authorization:"Bearer ".concat(a)},params:{limit:r,page:e,search:s,sortby:i,order:l}});return t(t=>({...t,dtVillage:n.data.data})),console.log({response:n}),{status:"berhasil",data:n.data}}catch(t){var n;return{status:"error",error:null===(n=t.response)||void 0===n?void 0:n.data}}},setShowVillage:async a=>{try{let e=await g.Z.getState().setToken(),r=await (0,h.Sj)({method:"get",url:"/villages/".concat(a),headers:{Authorization:"Bearer ".concat(e)}});return t(t=>({...t,dtVillage:r.data.data})),{status:"berhasil",data:r.data}}catch(t){var e;return{status:"error",error:null===(e=t.response)||void 0===e?void 0:e.data}}},addData:async a=>{try{let e=await g.Z.getState().setToken(),r=await (0,h.Sj)({method:"post",url:"/villages",headers:{Authorization:"Bearer ".concat(e)},data:a});return t(t=>({dtVillage:{last_page:t.dtVillage.last_page,current_page:t.dtVillage.current_page,data:[r.data.data,...t.dtVillage.data]}})),{status:"berhasil tambah",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},removeData:async a=>{try{let e=await g.Z.getState().setToken(),r=await (0,h.Sj)({method:"delete",url:"/villages/".concat(a),headers:{Authorization:"Bearer ".concat(e)}});return t(t=>({dtVillage:{last_page:t.dtVillage.last_page,current_page:t.dtVillage.current_page,data:t.dtVillage.data.filter(t=>t.id!==a)}})),{status:"berhasil hapus",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},updateData:async(a,e)=>{try{let r=await g.Z.getState().setToken(),s=await (0,h.Sj)({method:"PUT",url:"/villages/".concat(a),headers:{Authorization:"Bearer ".concat(r)},data:e});return t(t=>({dtVillage:{last_page:t.dtVillage.last_page,current_page:t.dtVillage.current_page,data:t.dtVillage.data.map(t=>t.id===a?{...t,...s.data.data}:t)}})),{status:"berhasil update",data:s.data}}catch(t){return{status:"error",data:t.response.data}}}})));var m=t=>{let{setDelete:a,setEdit:e}=t,{setVillage:d,dtVillage:u}=p(),[c,h]=(0,s.useState)(1),[g,m]=(0,s.useState)(10),[v,b]=(0,s.useState)(!0),f=(0,n.useSearchParams)(),x=(null==f?void 0:f.get("sortby"))||"",S=(null==f?void 0:f.get("order"))||"",_=(null==f?void 0:f.get("cari"))||"",j=o().debounce(t=>{t()},500),w=(0,s.useCallback)(async()=>{m(10),await d({page:c,limit:g,search:_,sortby:x,order:S}),b(!1)},[d,c,g,_,x,S]);return(0,s.useEffect)(()=>(j(w),()=>{j.cancel()}),[_,x,S,c,g]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:v?(0,r.jsx)("span",{className:"loading loading-spinner loading-lg"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(l.Z,{headTable:["No","Kecamatan","Kelurahan","Ongkir","Aksi"],tableBodies:["sub_district.sub_district_nm","village_nm","shipping_cost"],dataTable:null==u?void 0:u.data,page:c,limit:g,setEdit:e,setDelete:a,ubah:!0,hapus:!0})}),(null==u?void 0:u.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(i.Z,{currentPage:null==u?void 0:u.current_page,totalPages:null==u?void 0:u.last_page,setPage:h})})]})})},v=e(6433),b=e(9064),f=e(543),x=e(2841),S=e(1400),_=t=>{let{register:a,setValue:e,watch:s,halaman:i}=t;return(0,r.jsx)("div",{className:"grid grid-cols-8 gap-2 w-full",children:(0,r.jsx)(S.Z,{watch:s,setValue:e,name:"cari",register:a,placeholder:"Cari data ".concat(i),addClass:"col-span-8"})})},j=e(9501),w=e(1505),y=e(9762),k=e(3498),Z=e(9181),D=e(5281),N=t=>{let{register:a,errors:e,showModal:i,control:l}=t,{setSubDistricts:n,dtSubDistricts:d}=(0,D.Z)(),[o,u]=(0,s.useState)(!0),c=(0,s.useCallback)(async()=>{u(!0),await n({page:1,limit:10}),u(!1)},[n]);return(0,s.useEffect)(()=>{c()},[i]),(0,r.jsxs)(r.Fragment,{children:[!o&&(0,r.jsx)(Z.Z,{label:"Kecamatan/Distrik",placeholder:"Pilih Kecamatan/Distrik",name:"sub_district_id",dataDb:d.data,body:["id","sub_district_nm"],control:l,required:!0,errors:e.sub_district_id,addClass:"col-span-8 text-black relative",menuPortalTarget:!0}),(0,r.jsx)(w.Z,{label:"Kelurahan",name:"village_nm",register:a,errors:e.village_nm,required:!0,addClass:"col-span-8"}),(0,r.jsx)(k.Z,{label:"Ongkos",control:l,name:"shipping_cost",errors:e.shipping_cost,addClass:"col-span-8",required:!0,minLength:0})]})},V=e(7550),C=t=>{let{showModal:a,setShowModal:e,dtEdit:i,halaman:l}=t,{addData:n,updateData:d}=p(),[o,u]=(0,s.useState)(!1),{register:c,handleSubmit:h,setValue:g,control:m,formState:{errors:v},watch:b}=(0,j.cI)(),x=()=>{g("id",""),g("sub_district_id",""),g("village_nm",""),g("shipping_cost",0)};(0,s.useEffect)(()=>{i?(g("id",i.id),g("sub_district_id",i.sub_district_id),g("village_nm",i.village_nm),g("shipping_cost",i.shipping_cost)):x()},[a,i]);let S=async t=>{(0,V.Z)({row:t,dtEdit:i,setIsLoading:u,setShowModal:e,addData:n,updateData:d,resetForm:x,toastShow:f.Z})};return(0,r.jsx)(y.Z,{title:"Form ".concat(l),showModal:a,setShowModal:e,width:"md:w-[50rem] lg:w-[65rem]",children:(0,r.jsxs)("form",{onSubmit:h(S),children:[(0,r.jsx)(w.Z,{name:"id",register:c,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-8 gap-2 mb-4",children:(0,r.jsx)(N,{register:c,errors:v,dtEdit:i,control:m,watch:b,setValue:g,showModal:a})}),(0,r.jsx)("div",{children:o?(0,r.jsx)("span",{className:"loading loading-spinner loading-lg"}):(0,r.jsx)("button",{className:"btn btn-primary",onClick:h(S),type:"submit",children:"Simpan"})})]})})},T=()=>{let t="Kelurahan",{setWelcome:a}=(0,x.I)();(0,s.useEffect)(()=>(a("Halaman ".concat(t)),()=>{}),[a]);let{removeData:e}=p(),[i,l]=(0,s.useState)(!1),[n,d]=(0,s.useState)(!1),[o,u]=(0,s.useState)(),[c,h]=(0,s.useState)(),g=async t=>{let{id:a,isDelete:r}=t;if(u(a),r){let{data:t}=await e(o);(0,f.Z)({event:t}),d(!1)}else d(!0)},{register:S,setValue:w,watch:y,control:k}=(0,j.cI)();return(0,r.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(b.x7,{}),(0,r.jsx)(C,{dtEdit:null!=c?c:null,showModal:i,setShowModal:l,halaman:t}),(0,r.jsx)(v.Z,{showDel:n,setShowDel:d,setDelete:g}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("p",{children:"Silahkan Mengolah data Village"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>{l(!0),h(null)},children:"Tambah Data"})]})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(_,{halaman:t,register:S,setValue:w,watch:y,control:k})}),(0,r.jsx)(s.Suspense,{children:(0,r.jsx)(m,{setDelete:g,setEdit:t=>{l(!0),h(t)}})})]})}},3498:function(t,a,e){"use strict";var r=e(7437),s=e(9501),i=e(1560);a.Z=t=>{let{label:a,required:e,name:l,minLength:n,maxLength:d,errors:o,control:u,addClass:c}=t;return(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{htmlFor:l,className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),e&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(s.Qr,{name:l,control:u,rules:{required:e},render:t=>{let{field:a}=t;return(0,r.jsx)(i.h3,{id:l,type:"text",autoComplete:"off",thousandSeparator:",",prefix:"Rp. ",value:a.value,onValueChange:(t,e)=>{console.log(t,e),a.onChange(t.floatValue||"")},className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary"})}})}),(null==o?void 0:o.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]}),(null==o?void 0:o.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kurang dari ",n," karakter"]}),(null==o?void 0:o.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh lebih dari ",d," karakter"]}),(null==o?void 0:o.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," hanya boleh angka."]})]})}},9181:function(t,a,e){"use strict";e.d(a,{Z:function(){return v}});var r=e(7437),s=e(1119),i=e(2265),l=e(9448),n=e(1434),d=e(1993),o=e(1686),u=e(7673),c=e(6989),h=e(6083),g=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];e(4887),e(7935);var p=(0,i.forwardRef)(function(t,a){var e,r,p,m,v,b,f,x,S,_,j,w,y,k,Z,D,N,V,C,T,O,P,A,E,L,z,B,M,F,I,K,R,q,U,W,Q,H,G,J,X,Y,$,tt,ta,te,tr,ts,ti,tl,tn,td,to=(r=void 0!==(e=t.defaultOptions)&&e,m=void 0!==(p=t.cacheOptions)&&p,v=t.loadOptions,t.options,b=t.isLoading,f=t.onInputChange,x=t.filterOption,_=(S=(0,c.Z)(t,g)).inputValue,j=(0,i.useRef)(void 0),w=(0,i.useRef)(!1),y=(0,i.useState)(Array.isArray(r)?r:void 0),Z=(k=(0,u.Z)(y,2))[0],D=k[1],N=(0,i.useState)(void 0!==_?_:""),C=(V=(0,u.Z)(N,2))[0],T=V[1],O=(0,i.useState)(!0===r),A=(P=(0,u.Z)(O,2))[0],E=P[1],L=(0,i.useState)(void 0),B=(z=(0,u.Z)(L,2))[0],M=z[1],F=(0,i.useState)([]),K=(I=(0,u.Z)(F,2))[0],R=I[1],q=(0,i.useState)(!1),W=(U=(0,u.Z)(q,2))[0],Q=U[1],H=(0,i.useState)({}),J=(G=(0,u.Z)(H,2))[0],X=G[1],Y=(0,i.useState)(void 0),tt=($=(0,u.Z)(Y,2))[0],ta=$[1],te=(0,i.useState)(void 0),ts=(tr=(0,u.Z)(te,2))[0],ti=tr[1],m!==ts&&(X({}),ti(m)),r!==tt&&(D(Array.isArray(r)?r:void 0),ta(r)),(0,i.useEffect)(function(){return w.current=!0,function(){w.current=!1}},[]),tl=(0,i.useCallback)(function(t,a){if(!v)return a();var e=v(t,a);e&&"function"==typeof e.then&&e.then(a,function(){return a()})},[v]),(0,i.useEffect)(function(){!0===r&&tl(C,function(t){w.current&&(D(t||[]),E(!!j.current))})},[]),tn=(0,i.useCallback)(function(t,a){var e=(0,h.L)(t,a,f);if(!e){j.current=void 0,T(""),M(""),R([]),E(!1),Q(!1);return}if(m&&J[e])T(e),M(e),R(J[e]),E(!1),Q(!1);else{var r=j.current={};T(e),E(!0),Q(!B),tl(e,function(t){w&&r===j.current&&(j.current=void 0,E(!1),M(e),R(t||[]),Q(!1),X(t?(0,o.Z)((0,o.Z)({},J),{},(0,d.Z)({},e,t)):J))})}},[m,tl,B,J,f]),td=W?[]:C&&B?K:Z||[],(0,o.Z)((0,o.Z)({},S),{},{options:td,isLoading:A||void 0!==b&&b,onInputChange:tn,filterOption:void 0===x?null:x})),tu=(0,n.u)(to);return i.createElement(l.S,(0,s.Z)({ref:a},tu))}),m=e(9501),v=t=>{let{dataDb:a,body:e,control:s,required:i,name:l,errors:n,placeholder:d,addClass:o,label:u,defaultOptions:c=!0,menuPosition:h="fixed",menuPortalTarget:g=!1}=t,v={menuPortal:t=>({...t,zIndex:9999,pointerEvents:"auto"}),multiValue:(t,a)=>a.data.isFixed?{...t,backgroundColor:"gray"}:t,multiValueLabel:(t,a)=>a.data.isFixed?{...t,fontWeight:"bold",color:"white",paddingRight:6}:t,multiValueRemove:(t,a)=>a.data.isFixed?{...t,display:"none"}:t},b=(t,a)=>{let e=t[a];if("id"===a)return{value:e,label:""};if("NPM_FULL"===a){var r;let a=null==t?void 0:null===(r=t.thn_angkatan)||void 0===r?void 0:r.substring(2),e=t.prodi,s=t.NPM,i="".concat(e.kode).concat(a.substring(2)).concat(s);return{value:t.NPM,label:i}}if(!a.includes("."))return{value:"",label:e};{let[e,...r]=a.split(".");return b(t[e],r.join("."))}},f=()=>a&&a.map(t=>{let a=e.map(a=>b(t,a)),r=a.map(t=>t.label).filter(t=>""!==t),s=r.join(r.length>1?" - ":"");return{value:a.find(t=>""!==t.value).value,label:s}}),x=t=>{var a;return null===(a=f())||void 0===a?void 0:a.filter(a=>a.label.toLowerCase().includes(t.toLowerCase()))},S=(t,a)=>{setTimeout(()=>{a(x(t))},1e3)};return(0,r.jsxs)("div",{className:o,children:[u&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-black tracking-wide",children:u}),i&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)(m.Qr,{name:l,control:s,rules:{required:i},render:t=>{var a;let{field:{onChange:e,value:s,ref:i}}=t;return(0,r.jsx)(p,{cacheOptions:!0,defaultOptions:c,isClearable:!0,isSearchable:!0,loadOptions:S,placeholder:d,menuPlacement:"auto",menuPosition:h,menuPortalTarget:g?document.body:null,styles:v,ref:i,value:(null===(a=f())||void 0===a?void 0:a.find(t=>t.value===s))||null,onChange:t=>e(t?t.value:t)})}}),(null==n?void 0:n.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[u," tidak boleh kosong"]})]})}},5281:function(t,a,e){"use strict";var r=e(3011),s=e(6885),i=e(4061),l=e(4010);let n=(0,r.U)((0,s.mW)(t=>({dtSubDistricts:{last_page:0,current_page:0,data:[]},setSubDistricts:async a=>{let{page:e=1,limit:r=10,search:s,sortby:n,order:d}=a;try{let a=await l.Z.getState().setToken(),o=await (0,i.Sj)({method:"get",url:"/subDistricts",headers:{Authorization:"Bearer ".concat(a)},params:{limit:r,page:e,search:s,sortby:n,order:d}});return t(t=>({...t,dtSubDistricts:o.data.data})),console.log({response:o}),{status:"berhasil",data:o.data}}catch(t){var o;return{status:"error",error:null===(o=t.response)||void 0===o?void 0:o.data}}},setShowSubDistricts:async a=>{try{let e=await l.Z.getState().setToken(),r=await (0,i.Sj)({method:"get",url:"/subDistricts/".concat(a),headers:{Authorization:"Bearer ".concat(e)}});return t(t=>({...t,dtSubDistricts:r.data.data})),{status:"berhasil",data:r.data}}catch(t){var e;return{status:"error",error:null===(e=t.response)||void 0===e?void 0:e.data}}},addData:async a=>{try{let e=await l.Z.getState().setToken(),r=await (0,i.Sj)({method:"post",url:"/subDistricts",headers:{Authorization:"Bearer ".concat(e)},data:a});return t(t=>({dtSubDistricts:{last_page:t.dtSubDistricts.last_page,current_page:t.dtSubDistricts.current_page,data:[r.data.data,...t.dtSubDistricts.data]}})),{status:"berhasil tambah",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},removeData:async a=>{try{let e=await l.Z.getState().setToken(),r=await (0,i.Sj)({method:"delete",url:"/subDistricts/".concat(a),headers:{Authorization:"Bearer ".concat(e)}});return t(t=>({dtSubDistricts:{last_page:t.dtSubDistricts.last_page,current_page:t.dtSubDistricts.current_page,data:t.dtSubDistricts.data.filter(t=>t.id!==a)}})),{status:"berhasil hapus",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},updateData:async(a,e)=>{try{let r=await l.Z.getState().setToken(),s=await (0,i.Sj)({method:"PUT",url:"/subDistricts/".concat(a),headers:{Authorization:"Bearer ".concat(r)},data:e});return t(t=>({dtSubDistricts:{last_page:t.dtSubDistricts.last_page,current_page:t.dtSubDistricts.current_page,data:t.dtSubDistricts.data.map(t=>t.id===a?{...t,...s.data.data}:t)}})),{status:"berhasil update",data:s.data}}catch(t){return{status:"error",data:t.response.data}}}})));a.Z=n}},function(t){t.O(0,[1779,1866,6990,310,8295,9501,9099,8848,4285,1560,9264,2971,2117,1744],function(){return t(t.s=3973)}),_N_E=t.O()}]);