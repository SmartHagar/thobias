(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1569],{7532:function(e,t,a){Promise.resolve().then(a.bind(a,408))},408:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return F}});var s=a(7437),l=a(2265),r=a(1971),d=a(8745),i=a(9376),n=a(8946),c=a.n(n),o=a(3011),u=a(6885),h=a(4061),m=a(4010);let x=(0,o.U)((0,u.mW)(e=>({dtOrders:{last_page:0,current_page:0,data:[]},setOrders:async t=>{let{page:a=1,limit:s=10,search:l,sortby:r,order:d,status:i}=t;try{let t=await m.Z.getState().setToken(),n=await (0,h.Sj)({method:"get",url:"/orders",headers:{Authorization:"Bearer ".concat(t)},params:{limit:s,page:a,search:l,sortby:r,order:d,status:i}});return e(e=>({...e,dtOrders:n.data})),console.log({response:n}),{status:"berhasil",data:n.data}}catch(e){var n;return{status:"error",error:null===(n=e.response)||void 0===n?void 0:n.data}}},setShowOrders:async t=>{try{let a=await m.Z.getState().setToken(),s=await (0,h.Sj)({method:"get",url:"/orders/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({...e,dtOrders:s.data.data})),{status:"berhasil",data:s.data}}catch(e){var a;return{status:"error",error:null===(a=e.response)||void 0===a?void 0:a.data}}},addData:async t=>{try{let a=await m.Z.getState().setToken(),s=await (0,h.Sj)({method:"post",url:"/orders",headers:{Authorization:"Bearer ".concat(a)},data:t});return e(e=>({dtOrders:{last_page:e.dtOrders.last_page,current_page:e.dtOrders.current_page,data:[s.data.data,...e.dtOrders.data]}})),{status:s.data.type,data:s.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async t=>{try{let a=await m.Z.getState().setToken(),s=await (0,h.Sj)({method:"delete",url:"/orders/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({dtOrders:{last_page:e.dtOrders.last_page,current_page:e.dtOrders.current_page,data:e.dtOrders.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:s.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,a)=>{try{let s=await m.Z.getState().setToken(),l=await (0,h.Sj)({method:"PUT",url:"/orders/".concat(t),headers:{Authorization:"Bearer ".concat(s)},data:a});return e(e=>({dtOrders:{last_page:e.dtOrders.last_page,current_page:e.dtOrders.current_page,data:e.dtOrders.data.map(e=>e.id===t?{...e,...l.data.data}:e)}})),{status:"berhasil update",data:l.data}}catch(e){return{status:"error",data:e.response.data}}}})));var p=a(1140),v=a(9762),g=a(393),j=a(3145),f=e=>{let{dtOrders:t}=e;return(0,s.jsx)("div",{className:"list_order",children:(0,s.jsxs)("div",{className:"order_item border border-line rounded-lg box-shadow-xs",children:[(0,s.jsx)("div",{className:"list_prd px-5",children:t.order_items.map(e=>{var t,a,l;let r=e.product_variant_id?e.product_variant.variant_img:null===(t=e.product.product_image.find(e=>e.is_main))||void 0===t?void 0:t.product_img,d=e.product_variant_id?e.product_variant.price:e.product.price;return(0,s.jsx)("div",{className:"item py-5 flex items-center justify-between gap-3 border-b border-line",children:(0,s.jsxs)("div",{className:"infor flex items-center gap-3 w-full",children:[(0,s.jsx)("div",{className:"bg-img w-[100px] aspect-square flex-shrink-0 rounded-lg overflow-hidden",children:(0,s.jsx)(j.default,{src:"".concat(h._n,"/").concat(r),width:300,height:300,alt:e.product.product_nm,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"flex items-center justify-between w-full",children:(0,s.jsx)("div",{className:"name text-button",children:e.product.product_nm})}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 mt-3 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center text-secondary2 capitalize",children:[null==e?void 0:null===(a=e.product_variant)||void 0===a?void 0:a.size,"/",null==e?void 0:null===(l=e.product_variant)||void 0===l?void 0:l.color]}),(0,s.jsxs)("span",{className:"items-center text-xs",children:["X ",e.quantity]}),(0,s.jsx)("div",{className:"cart-price text-title",children:(0,g.Z)(d)})]})]})]})},e.id)})}),(0,s.jsxs)("div",{className:"discount-block py-1 flex justify-between border-b border-line",children:[(0,s.jsx)("div",{className:"text-title",children:"Ongkir"}),(0,s.jsx)("div",{className:"text-title",children:(0,s.jsx)("span",{children:(0,g.Z)(t.shipping_cost)})})]}),(0,s.jsxs)("div",{className:"ship-block py-1 flex justify-between border-b border-line",children:[(0,s.jsx)("div",{className:"text-title",children:"Belanja"}),(0,s.jsx)("div",{className:"text-title",children:(0,g.Z)(t.total_price)})]}),(0,s.jsxs)("div",{className:"total-cart-block py-1 flex justify-between",children:[(0,s.jsx)("div",{className:"heading5",children:"Total"}),(0,s.jsx)("div",{className:"heading5 total-cart",children:(0,g.Z)(t.total_payment)})]})]},t.id)})},b=e=>{var t;let{showModal:a,setShowModal:l,order:r}=e;return(0,s.jsx)(v.Z,{title:"Detail Order",showModal:a,setShowModal:l,width:"md:w-[50rem] lg:w-[65rem]",children:(0,s.jsxs)("div",{className:"flex justify-center items-center flex-col",children:[(0,s.jsx)("p",{className:"capitalize font-bold",children:null==r?void 0:null===(t=r.shipping_status)||void 0===t?void 0:t.status}),(0,s.jsx)("div",{className:"self-start my-4",children:(0,s.jsx)("table",{children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{valign:"top",children:"Kecamatan-Kelurahan"}),(0,s.jsx)("td",{valign:"top",children:":"}),(0,s.jsxs)("td",{valign:"top",children:[null==r?void 0:r.village.sub_district.sub_district_nm,"-",null==r?void 0:r.village.village_nm]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{valign:"top",children:"Alamat"}),(0,s.jsx)("td",{valign:"top",children:":"}),(0,s.jsx)("td",{valign:"top",children:null==r?void 0:r.address})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{valign:"top",children:"No. HP"}),(0,s.jsx)("td",{valign:"top",children:":"}),(0,s.jsx)("td",{valign:"top",children:null==r?void 0:r.phone})]})]})})}),(0,s.jsx)("div",{className:" w-full",children:(0,s.jsx)(f,{dtOrders:r})})]})})},w=e=>{let{setDelete:t,setEdit:a}=e,{setOrders:n,dtOrders:o}=x(),[u,h]=(0,l.useState)(1),[m,v]=(0,l.useState)(10),[g,j]=(0,l.useState)(!0),[f,w]=(0,l.useState)(),[_,N]=(0,l.useState)(!1),y=(0,i.useSearchParams)(),S=(null==y?void 0:y.get("sortby"))||"",k=(null==y?void 0:y.get("order"))||"",O=(null==y?void 0:y.get("cari"))||"",Z=c().debounce(e=>{e()},500),E=(0,l.useCallback)(async()=>{v(10),await n({page:u,limit:m,search:O,sortby:S,order:k,status:"dibayar,selesai"}),j(!1)},[n,u,m,O,S,k]);return console.log({dtOrders:o}),(0,l.useEffect)(()=>(Z(E),()=>{Z.cancel()}),[O,S,k,u,m]),(0,s.jsxs)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:[g?(0,s.jsx)("span",{className:"loading loading-dots loading-lg"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(d.Z,{headTable:["No","Nama","Kelurahan","status","Aksi"],tableBodies:["nm_recipient","village.village_nm","shipping_status_status"],dataTable:null==o?void 0:o.data,page:u,limit:m,setEdit:a,setDelete:t,ubah:!0,hapus:!0,costume:e=>(0,s.jsx)(p.Hfo,{className:"cursor-pointer hover:text-accent",size:20,onClick:()=>{N(!0),w(e)}})})}),(null==o?void 0:o.last_page)>1&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(r.Z,{currentPage:null==o?void 0:o.current_page,totalPages:null==o?void 0:o.last_page,setPage:h})})]}),(0,s.jsx)(b,{setShowModal:N,showModal:_,order:f})]})},_=a(6433),N=a(9064),y=a(543),S=a(2841),k=a(1400),O=e=>{let{register:t,setValue:a,watch:l,halaman:r}=e;return(0,s.jsx)("div",{className:"grid grid-cols-8 gap-2 w-full",children:(0,s.jsx)(k.Z,{watch:l,setValue:a,name:"cari",register:t,placeholder:"Cari data ".concat(r),addClass:"col-span-8"})})},Z=a(9501),E=a(1505),P=a(1434),C=a(1119),D=a(9448);a(8242),a(4887),a(7935);var M=(0,l.forwardRef)(function(e,t){var a=(0,P.u)(e);return l.createElement(D.S,(0,C.Z)({ref:t},a))}),T=e=>{let{label:t,control:a,required:r,name:d,errors:i,addClass:n,menuPosition:c="fixed",placeholder:o="Pilih...",options:u=[]}=e,[h,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{"undefined"!=typeof document&&m(document.body)},[]);let x={menuPortal:e=>({...e,zIndex:9999,pointerEvents:"auto"}),multiValue:(e,t)=>t.data.isFixed?{...e,backgroundColor:"gray"}:e,multiValueLabel:(e,t)=>t.data.isFixed?{...e,fontWeight:"bold",color:"white",paddingRight:6}:e,multiValueRemove:(e,t)=>t.data.isFixed?{...e,display:"none"}:e};return(0,s.jsxs)("div",{className:n,children:[t&&(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),r&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),h&&(0,s.jsx)(Z.Qr,{name:d,control:a,rules:{required:r},render:e=>{let{field:{onChange:t,value:a,ref:l}}=e;return(0,s.jsx)(M,{isClearable:!0,isSearchable:!0,options:u,placeholder:o,menuPosition:c,ref:l,value:a?u.find(e=>e.value===a):a,onChange:e=>t(e?e.value:e),menuPortalTarget:h?document.body:null,styles:x})}}),(null==i?void 0:i.type)==="required"&&(0,s.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tahun tidak boleh kosong"})]})},z=e=>{let{control:t,errors:a}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(T,{name:"status",label:"Status Kirim",placeholder:"Pilih Status Kirim",options:[{value:"dikemas",label:"Dikemas"},{value:"dikirim",label:"Dikirim"},{value:"selesai",label:"Selesai"}],addClass:"col-span-8",required:!0,errors:a.status,control:t})})},A=a(7550),B=e=>{let{showModal:t,setShowModal:a,dtEdit:r,halaman:d}=e,{addData:i,updateData:n,setOrders:c}=x(),[o,u]=(0,l.useState)(!1),{register:h,handleSubmit:m,setValue:p,control:g,formState:{errors:j},watch:f}=(0,Z.cI)(),b=()=>{p("id",""),p("status","")};(0,l.useEffect)(()=>{r?(p("id",r.id),p("status",r.status)):b()},[t,r]);let w=async e=>{await (0,A.Z)({row:e,dtEdit:r,setIsLoading:u,setShowModal:a,addData:i,updateData:n,resetForm:b,toastShow:y.Z}),await c({page:1,limit:10,status:"dibayar,selesai"})};return(0,s.jsx)(v.Z,{title:"Form ".concat(d),showModal:t,setShowModal:a,width:"md:w-[50rem] lg:w-[65rem]",children:(0,s.jsxs)("form",{onSubmit:m(w),children:[(0,s.jsx)(E.Z,{name:"id",register:h,type:"hidden"}),(0,s.jsx)("div",{className:"grid grid-cols-8 gap-2 mb-4",children:(0,s.jsx)(z,{register:h,errors:j,dtEdit:null!=r?r:null,control:g,watch:f,setValue:p,showModal:t})}),(0,s.jsx)("div",{children:o?(0,s.jsx)("span",{className:"loading loading-spinner loading-lg"}):(0,s.jsx)("button",{className:"btn btn-primary",onClick:m(w),type:"submit",children:"Simpan"})})]})})},F=()=>{let e="Jenis Makanan",{setWelcome:t}=(0,S.I)();(0,l.useEffect)(()=>(t("Halaman ".concat(e)),()=>{}),[t]);let{removeData:a}=x(),[r,d]=(0,l.useState)(!1),[i,n]=(0,l.useState)(!1),[c,o]=(0,l.useState)(),[u,h]=(0,l.useState)(),m=async e=>{let{id:t,isDelete:s}=e;if(o(t),s){let{data:e}=await a(c);(0,y.Z)({event:e}),n(!1)}else n(!0)},{register:p,setValue:v,watch:g,control:j}=(0,Z.cI)();return(0,s.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(N.x7,{}),(0,s.jsx)(B,{dtEdit:null!=u?u:null,showModal:r,setShowModal:d,halaman:e}),(0,s.jsx)(_.Z,{showDel:i,setShowDel:n,setDelete:m}),(0,s.jsx)("div",{className:"mb-4 flex justify-between",children:(0,s.jsx)("p",{children:"Silahkan Mengolah data Pesanan"})})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(O,{halaman:e,register:p,setValue:v,watch:g,control:j})}),(0,s.jsx)(l.Suspense,{children:(0,s.jsx)(w,{setDelete:m,setEdit:e=>{d(!0),h(null==e?void 0:e.shipping_status)}})})]})}}},function(e){e.O(0,[1779,1866,6990,310,8295,9501,9099,8848,4285,9264,2971,2117,1744],function(){return e(e.s=7532)}),_N_E=e.O()}]);