(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2610],{9568:function(e,t,a){Promise.resolve().then(a.bind(a,5901))},7165:function(e){(()=>{"use strict";var t={d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};t.r(a),t.d(a,{default:()=>i});var r=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"changeHeightWidth",value:function(e,t,a,r,i,n){return a>r&&(e=Math.round(e*r/a),a=r),e>t&&(a=Math.round(a*t/e),e=t),i&&a<i&&(e=Math.round(e*i/a),a=i),n&&e<n&&(a=Math.round(a*n/e),e=n),{height:e,width:a}}},{key:"resizeAndRotateImage",value:function(e,t,a,r,i){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=document.createElement("canvas"),c=e.width,d=e.height,u=this.changeHeightWidth(d,a,c,t,r,i);l&&(90===l||270===l)?(o.width=u.height,o.height=u.width):(o.width=u.width,o.height=u.height),c=u.width,d=u.height;var p=o.getContext("2d");return p.fillStyle="rgba(0, 0, 0, 0)",p.fillRect(0,0,c,d),p.imageSmoothingEnabled&&p.imageSmoothingQuality&&(p.imageSmoothingQuality="high"),l&&(p.rotate(l*Math.PI/180),90===l?p.translate(0,-o.width):180===l?p.translate(-o.width,-o.height):270===l?p.translate(-o.height,0):0!==l&&360!==l||p.translate(0,0)),p.drawImage(e,0,0,c,d),o.toDataURL("image/".concat(n),s/100)}},{key:"b64toByteArrays",value:function(e,t){t=t||"image/jpeg";for(var a=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],i=0;i<a.length;i+=512){for(var n=a.slice(i,i+512),s=Array(n.length),l=0;l<n.length;l++)s[l]=n.charCodeAt(l);var o=new Uint8Array(s);r.push(o)}return r}},{key:"b64toBlob",value:function(e,t){return new Blob(this.b64toByteArrays(e,t),{type:t,lastModified:new Date})}},{key:"b64toFile",value:function(e,t,a){return new File(this.b64toByteArrays(e,a),t,{type:a,lastModified:new Date})}},{key:"createResizedImage",value:function(e,a,r,i,n,s,l){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=new FileReader;if(!e)throw Error("File Not Found!");if(e.type&&!e.type.includes("image"))throw Error("File Is NOT Image!");u.readAsDataURL(e),u.onload=function(){var p=new Image;p.src=u.result,p.onload=function(){var u=t.resizeAndRotateImage(p,a,r,c,d,i,n,s),m="image/".concat(i);switch(o){case"blob":l(t.b64toBlob(u,m));break;case"base64":default:l(u);break;case"file":var g=e.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(i.toString());l(t.b64toFile(u,g,m))}}},u.onerror=function(e){throw Error(e)}}}],function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();let i={imageFileResizer:function(e,t,a,i,n,s,l,o,c,d){return r.createResizedImage(e,t,a,i,n,s,l,o,c,d)}};e.exports=a})()},5901:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var r=a(7437),i=a(1505),n=a(543),s=a(2265),l=a(9501),o=a(3498),c=a(3727),d=a(9181),u=a(7984),p=a(166),m=e=>{let{label:t,register:a,required:i,name:n,errors:l,valueAsNumber:o,readOnly:c,addClass:d,defaultValue:u,labelCss:p="text-gray-700",dtEdit:m}=e,[g,h]=(0,s.useState)(u);return(0,r.jsxs)("div",{className:d,children:[(0,r.jsx)("label",{htmlFor:n,className:"text-sm font-medium tracking-wide ".concat(p),children:t}),g&&g!==m&&(0,r.jsx)("span",{onClick:()=>{m?h(m):h("")},className:"cursor-pointer ms-1",children:"X"}),i&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("input",{type:"color",id:n,readOnly:c,...a(n,{required:i,valueAsNumber:o}),defaultValue:u,value:g,onChange:e=>{h(e.target.value)}})}),(null==l?void 0:l.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]})]})},g=a(446),h=a(1140),v=e=>{let{register:t,errors:a,dtEdit:n,control:c,watch:d,setValue:u,hasVariants:p}=e,{fields:v,append:f,remove:b}=(0,l.Dq)({control:c,name:"product_variant"}),x=()=>{f({color:"",size:"",price:"",stock:"",variant_img:""})};(0,s.useEffect)(()=>{p?x():b()},[p]),(0,s.useEffect)(()=>{if(n)for(let e=0;e<n.product_variant.length;e++)f({color:n.product_variant[e].color,size:n.product_variant[e].size,price:n.product_variant[e].price,stock:n.product_variant[e].stock,variant_img:n.product_variant[e].variant_img})},[n]);let y=e=>{b(e)};return(0,r.jsxs)("section",{className:"col-span-4 grid grid-cols-8 gap-4",children:[v.map((e,s)=>{var l,p,f,b,x,j,k,_,w,N,S;return(0,r.jsxs)("div",{className:"grid grid-cols-8 gap-2 col-span-8 shadow-lg mb-4 relative pt-8",children:[v.length>1&&(0,r.jsx)(h.fZX,{className:"absolute top-2 right-2 cursor-pointer text-xl",title:"Tutup",onClick:()=>y(s)}),(0,r.jsx)(m,{label:"Pilih Warna",name:"product_variant.".concat(s,".color"),register:t,errors:a,addClass:"col-span-8 lg:col-span-4",dtEdit:null==n?void 0:null===(l=n.product_variant[s])||void 0===l?void 0:l.color}),(0,r.jsx)(i.Z,{label:"Ukuran",name:"product_variant.".concat(s,".size"),register:t,errors:null==a?void 0:null===(f=a.product_variant)||void 0===f?void 0:null===(p=f[s])||void 0===p?void 0:p.size,addClass:"col-span-8 lg:col-span-4"}),(0,r.jsx)(i.Z,{label:"Stock",name:"product_variant.".concat(s,".stock"),register:t,errors:null==a?void 0:null===(x=a.product_variant)||void 0===x?void 0:null===(b=x[s])||void 0===b?void 0:b.stock,required:!0,type:"number",min:1,addClass:"col-span-8 lg:col-span-2"}),(0,r.jsx)(o.Z,{label:"Harga",control:c,name:"product_variant.".concat(s,".price"),errors:null==a?void 0:null===(k=a.product_variant)||void 0===k?void 0:null===(j=k[s])||void 0===j?void 0:j.price,addClass:"col-span-8 lg:col-span-6",required:!0,minLength:1}),(0,r.jsx)(g.Z,{label:"Gambar Varian",name:"product_variant.".concat(s,".variant_img"),register:t,accept:"image/*",errors:null==a?void 0:null===(w=a.product_variant)||void 0===w?void 0:null===(_=w[s])||void 0===_?void 0:_.variant_img,addClass:"col-span-8",setValue:u,fileEdit:null==n?void 0:null===(S=n.product_variant)||void 0===S?void 0:null===(N=S[s])||void 0===N?void 0:N.variant_img,watch:d,required:!0})]},e.id)}),p&&(0,r.jsx)(h.Dwu,{className:"mr-2 text-2xl cursor-pointer",title:"Tambah Varian",onClick:x})]})};let f=(0,p.default)(()=>Promise.all([a.e(2908),a.e(2115),a.e(5387),a.e(3909),a.e(6632),a.e(8362),a.e(6862),a.e(4367),a.e(5783)]).then(a.bind(a,5783)),{loadableGenerated:{webpack:()=>[5783]},ssr:!1});var b=e=>{let{register:t,errors:a,control:n,dtEdit:l,setValue:p,watch:m}=e,{setSubCategories:g,dtSubCategories:h}=(0,u.Z)(),[b,x]=(0,s.useState)(!0),y=(0,s.useCallback)(async()=>{x(!0),await g({page:1,limit:10}),x(!1)},[g]);(0,s.useEffect)(()=>{y()},[]);let j=m("has_variants");return(0,s.useEffect)(()=>{j?p("stock",0):p("stock",1),p("price",0)},[j,p]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"".concat(j?"col-span-4 h-fit":"col-span-8","  h-auto grid grid-cols-8 gap-2"),children:[!b&&(0,r.jsx)(d.Z,{label:"Sub Kategori",placeholder:"Pilih Sub Kategori",name:"sub_category_id",dataDb:h.data,body:["id","category.category_nm","sub_category_nm"],control:n,required:!0,errors:a.sub_category_id,addClass:"col-span-8 text-black relative",menuPortalTarget:!0}),(0,r.jsx)(i.Z,{label:"Nama Produk",name:"product_nm",register:t,errors:a.product_nm,required:!0,addClass:"col-span-8"}),(0,r.jsx)(f,{control:n,name:"product_desc",label:"Deskripsi",addClass:"col-span-8",errors:a.product_desc,initialValue:(null==l?void 0:l.product_desc)||"",setValue:p}),(0,r.jsx)(c.Z,{label:"Memiliki Varian",name:"has_variants",register:t,required:!0,errors:a.has_variants,defaultChecked:!1,addClass:"col-span-8"}),!j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{label:"Stock",name:"stock",register:t,errors:a.stock,required:!0,type:"number",min:1,addClass:"col-span-8 lg:col-span-2"}),(0,r.jsx)(o.Z,{label:"Harga",control:n,name:"price",errors:a.price,addClass:"col-span-8  lg:col-span-6",required:!0,minLength:1})]})]}),(0,r.jsx)(v,{register:t,errors:a,control:n,dtEdit:l,watch:m,setValue:p,hasVariants:j})]})},x=a(7550),y=a(8278),j=a(9376),k=()=>{let{addData:e,updateData:t,setShowProducts:a,showProduct:o}=(0,y.Z)(),[c,d]=(0,s.useState)(!1),[u,p]=(0,s.useState)(null),m=(0,j.useSearchParams)(),g=(null==m?void 0:m.get("product_id"))||"";(0,s.useEffect)(()=>{g?a(g):p(null)},[g,a]),(0,s.useEffect)(()=>{o&&p(o)},[o]);let{register:h,handleSubmit:v,setValue:f,control:k,formState:{errors:_},watch:w}=(0,l.cI)(),N=()=>{f("id",""),f("product_nm","")};(0,s.useEffect)(()=>{u?(f("id",u.id),f("product_nm",u.product_nm),f("sub_category_id",u.sub_category_id)):N()},[u]);let S=async a=>{console.log({row:a}),(0,x.Z)({row:a,dtEdit:u,setIsLoading:d,addData:e,updateData:t,resetForm:N,toastShow:n.Z})};return(0,r.jsx)("section",{className:"flex flex-col",children:(0,r.jsxs)("form",{onSubmit:v(S),children:[(0,r.jsx)(i.Z,{name:"id",register:h,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-8 gap-8 mb-4",children:(0,r.jsx)(b,{register:h,errors:_,dtEdit:u,control:k,watch:w,setValue:f})}),(0,r.jsx)("div",{children:c?(0,r.jsx)("span",{className:"loading loading-spinner text-primary"}):(0,r.jsx)("button",{className:"btn btn-primary",onClick:v(S),type:"submit",children:"Simpan"})})]})})}},446:function(e,t,a){"use strict";var r=a(7437),i=a(4061),n=a(3145),s=a(2265),l=a(7165),o=a.n(l);t.Z=e=>{let{label:t,register:a,required:l,name:c,errors:d,addClass:u,accept:p,setValue:m,fileEdit:g,initialValue:h,watch:v,size:f="md",labelCss:b="text-gray-700"}=e,[x,y]=(0,s.useState)(),[j,k]=(0,s.useState)(h||""),_=v(c);(0,s.useEffect)(()=>{_||k("")},[_]);let w=e=>new Promise(()=>{let t="sm"===f?500:"md"===f?1e3:1600;if(e){var a;let r=(null==e?void 0:null===(a=e.type)||void 0===a?void 0:a.split("/"))||[];if("image"!==r[0])return N(e);o().imageFileResizer(e,t,t,r[1],100,0,e=>{N(e)},"file")}else N(null)}),N=e=>{var t;if(e){let t=new FileReader;t.readAsDataURL(e),t.onloadend=()=>{k(t.result)}}y(((null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.split("/"))||[])[0]),m(c,e)};return(0,r.jsxs)("div",{className:u,children:[t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{className:"text-sm font-medium tracking-wide ".concat(b),children:t}),l&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),!l&&(0,r.jsx)("span",{className:"text-sm font-medium tracking-wide ".concat(b),children:"(Optional)"})]}),(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:p,onChange:e=>{var t;w((null===(t=e.target)||void 0===t?void 0:t.files[0])||null)}}),(0,r.jsx)("input",{type:"hidden",id:t,...a(c,{required:l})}),(0,r.jsxs)("div",{className:"flex gap-4 mt-2",children:[j&&"image"===x&&(0,r.jsx)(n.default,{className:"rounded-lg",src:j,width:100,height:100,alt:""}),g&&"file"!==c&&"file_materi"!==c&&(0,r.jsx)("div",{children:(0,r.jsx)(n.default,{src:"".concat(i._n,"/").concat(g),width:100,height:100,alt:""})})]}),(null==d?void 0:d.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]})]})}},1505:function(e,t,a){"use strict";var r=a(7437);t.Z=e=>{let{label:t,register:a,required:i,name:n,minLength:s,maxLength:l,errors:o,valueAsNumber:c,type:d="text",readOnly:u,placeholder:p,autoComplete:m="on",addClass:g,value:h,defaultValue:v,max:f,min:b,step:x,labelCss:y="text-gray-700"}=e;return(0,r.jsxs)("div",{className:g,children:[(0,r.jsx)("label",{htmlFor:n,className:"text-sm font-medium  tracking-wide ".concat(y),children:t}),i&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:d,id:n,readOnly:u,placeholder:p,autoComplete:m,...a(n,{required:i,minLength:s,maxLength:l,valueAsNumber:c,max:f,min:b,step:x}),defaultValue:v,value:h})}),(null==o?void 0:o.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==o?void 0:o.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",s," karakter"]}),(null==o?void 0:o.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",l," karakter"]}),(null==o?void 0:o.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]}),(null==o?void 0:o.type)==="max"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",f,"."]}),(null==o?void 0:o.type)==="min"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",b,"."]})]})}},4061:function(e,t,a){"use strict";a.d(t,{I8:function(){return n},Sj:function(){return s},_n:function(){return i},hi:function(){return l}});var r=a(3464);let i="https://thobias.ta-uogp.my.id",n=r.Z.create({baseURL:"".concat(i,"/auth")}),s=r.Z.create({baseURL:"".concat(i,"/crud")}),l=r.Z.create({baseURL:"".concat(i,"/api")});r.Z.create({baseURL:"".concat(i,"/storage")})},7550:function(e,t,a){"use strict";async function r(e){let{row:t,dtEdit:a,setIsLoading:r,setShowModal:i,addData:n,updateData:s,resetForm:l,toastShow:o,goTo:c}=e;if(r(!0),a){let{data:e}=await s(a.id,t);o&&o({event:e}),i&&i(!1),console.log("update"),c&&c()}else{let{data:e}=await n(t);o&&o({event:e}),(null==e?void 0:e.type)==="success"&&(console.log("simpan"),l&&l(),c&&c())}r(!1)}a.d(t,{Z:function(){return r}})},4010:function(e,t,a){"use strict";var r=a(3011),i=a(6885),n=a(4061),s=a(4131);let l=(0,r.U)((0,i.mW)((e,t)=>({setToken:async()=>s.Z.get("token"),setLogin:async e=>{try{let t=await (0,n.I8)({method:"post",url:"/login",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setRegister:async e=>{try{let t=await (0,n.I8)({method:"post",url:"/register",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let a=await t().setToken();try{let t=await (0,n.I8)({method:"post",url:"/cek_token",headers:{Authorization:"Bearer ".concat(a)}});return e(e=>{var a;return{...e,dtUser:null===(a=t.data)||void 0===a?void 0:a.user}}),{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));t.Z=l},543:function(e,t,a){"use strict";var r=a(9064);t.Z=e=>{let{event:t,position:a}=e;switch(t.type){case"success":r.ZP.success(t.message,{duration:4e3,position:a});break;case"error":r.ZP.error(t.message,{duration:4e3,position:a})}}}},function(e){e.O(0,[1779,310,8295,9501,9099,4285,1560,6702,2971,2117,1744],function(){return e(e.s=9568)}),_N_E=e.O()}]);