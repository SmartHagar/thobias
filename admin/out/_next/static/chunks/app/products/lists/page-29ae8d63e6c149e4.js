(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9808],{2969:function(e,a,s){Promise.resolve().then(s.bind(s,2826))},2826:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return E}});var t=s(7437),r=s(2265),l=s(1971),i=s(8745),n=s(9376),o=s(8946),c=s.n(o),d=s(8278),u=s(1140),m=s(543),p=e=>{let{setDelete:a,setEdit:s}=e,{setProducts:o,dtProducts:p}=(0,d.Z)(),[h,g]=(0,r.useState)(1),[x,b]=(0,r.useState)(10),[j,k]=(0,r.useState)(!0),_=(0,n.useSearchParams)(),f=(null==_?void 0:_.get("sortby"))||"",v=(null==_?void 0:_.get("order"))||"",w=(null==_?void 0:_.get("cari"))||"",y=(0,n.useRouter)(),S=c().debounce(e=>{e()},500),N=(0,r.useCallback)(async()=>{b(10),await o({page:h,limit:x,search:w,sortby:f,order:v}),k(!1)},[o,h,x,w,f,v]);(0,r.useEffect)(()=>(S(N),()=>{S.cancel()}),[w,f,v,h,x]);let Z=e=>y.push(e);return(0,t.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:j?(0,t.jsx)("span",{className:"loading loading-spinner loading-lg"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"",children:(0,t.jsx)(i.Z,{headTable:["No","Kategori","Sub Kategori","Nama","Stok","Harga","Deskripsi","Aksi"],tableBodies:["sub_category.category.category_nm","sub_category.sub_category_nm","product_nm","stock","price","product_desc"],dataTable:null==p?void 0:p.data,page:h,limit:x,setEdit:s,setDelete:a,ubah:!0,hapus:!0,onClickTR:e=>{e.has_variants?Z("/products/variants?product_id=".concat(e.id)):(0,m.Z)({event:{type:"error",message:"Produk tidak memiliki varian"}})},costume:e=>(0,t.jsx)(u.jnY,{onClick:a=>{a.stopPropagation(),Z("/products/images?product_id=".concat(e.id))},className:"cursor-pointer hover:text-primary"})})}),(null==p?void 0:p.last_page)>1&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(l.Z,{currentPage:null==p?void 0:p.current_page,totalPages:null==p?void 0:p.last_page,setPage:g})})]})})},h=s(6433),g=s(9064),x=s(2841),b=s(1400),j=e=>{let{register:a,setValue:s,watch:r,halaman:l}=e;return(0,t.jsx)("div",{className:"grid grid-cols-8 gap-2 w-full",children:(0,t.jsx)(b.Z,{watch:r,setValue:s,name:"cari",register:a,placeholder:"Cari data ".concat(l),addClass:"col-span-8"})})},k=s(9501),_=s(1505),f=s(9762),v=s(3498),w=s(3727),y=s(9181),S=s(7984);let N=(0,s(166).default)(()=>Promise.all([s.e(2908),s.e(2115),s.e(5387),s.e(3909),s.e(6632),s.e(8362),s.e(6862),s.e(4367),s.e(5783)]).then(s.bind(s,5783)),{loadableGenerated:{webpack:()=>[5783]},ssr:!1});var Z=e=>{let{register:a,errors:s,showModal:l,control:i,dtEdit:n,setValue:o,watch:c}=e,{setSubCategories:d,dtSubCategories:u}=(0,S.Z)(),[m,p]=(0,r.useState)(!0),h=(0,r.useCallback)(async()=>{p(!0),await d({page:1,limit:10}),p(!1)},[d]);(0,r.useEffect)(()=>{h()},[l]);let g=c("has_variants");return(0,r.useEffect)(()=>{g&&(o("stock",""),o("price",""))},[g,o]),(0,t.jsxs)(t.Fragment,{children:[!m&&(0,t.jsx)(y.Z,{label:"Sub Kategori",placeholder:"Pilih Sub Kategori",name:"sub_category_id",dataDb:u.data,body:["id","category.category_nm","sub_category_nm"],control:i,required:!0,errors:s.sub_category_id,addClass:"col-span-8 text-black relative",menuPortalTarget:!0}),(0,t.jsx)(_.Z,{label:"Nama Produk",name:"product_nm",register:a,errors:s.product_nm,required:!0,addClass:"col-span-8"}),(0,t.jsx)(N,{control:i,name:"product_desc",label:"Deskripsi",addClass:"col-span-8",errors:s.product_desc,initialValue:(null==n?void 0:n.product_desc)||"",setValue:o}),(0,t.jsx)(w.Z,{label:"Memiliki Varian",name:"has_variants",register:a,errors:s.has_variants,defaultChecked:!1,addClass:"col-span-8"}),!g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{label:"Stock",name:"stock",register:a,errors:s.stock,required:!0,type:"number",min:1,addClass:"col-span-8 lg:col-span-2"}),(0,t.jsx)(v.Z,{label:"Harga",control:i,name:"price",errors:s.price,addClass:"col-span-8  lg:col-span-6",required:!0,minLength:1})]})]})},C=s(7550),P=e=>{let{showModal:a,setShowModal:s,dtEdit:l,halaman:i}=e,{addData:n,updateData:o}=(0,d.Z)(),[c,u]=(0,r.useState)(!1),{register:p,handleSubmit:h,setValue:g,control:x,formState:{errors:b},watch:j}=(0,k.cI)(),v=()=>{g("id",""),g("product_nm",""),g("stock",""),g("price","")};(0,r.useEffect)(()=>{l?(g("id",l.id),g("product_nm",l.product_nm),g("price",l.price),g("stock",l.stock)):v()},[a,l]);let w=async e=>{(0,C.Z)({row:e,dtEdit:l,setIsLoading:u,setShowModal:s,addData:n,updateData:o,resetForm:v,toastShow:m.Z})};return(0,t.jsx)(f.Z,{title:"Form ".concat(i),showModal:a,setShowModal:s,width:"md:w-[50rem] lg:w-[65rem]",children:(0,t.jsxs)("form",{onSubmit:h(w),children:[(0,t.jsx)(_.Z,{name:"id",register:p,type:"hidden"}),(0,t.jsx)("div",{className:"grid grid-cols-8 gap-2 mb-4",children:(0,t.jsx)(Z,{register:p,errors:b,dtEdit:l,control:x,watch:j,setValue:g,showModal:a})}),(0,t.jsx)("div",{children:c?(0,t.jsx)("span",{className:"loading loading-spinner text-primary"}):(0,t.jsx)("button",{className:"btn btn-primary",onClick:h(w),type:"submit",children:"Simpan"})})]})})},E=()=>{let e="Produk",{setWelcome:a}=(0,x.I)();(0,r.useEffect)(()=>(a("Halaman ".concat(e)),()=>{}),[a]);let{removeData:s}=(0,d.Z)(),[l,i]=(0,r.useState)(!1),[n,o]=(0,r.useState)(!1),[c,u]=(0,r.useState)(),[b,_]=(0,r.useState)(),f=async e=>{let{id:a,isDelete:t}=e;if(u(a),t){let{data:e}=await s(c);(0,m.Z)({event:e}),o(!1)}else o(!0)},{register:v,setValue:w,watch:y,control:S}=(0,k.cI)();return(0,t.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(g.x7,{}),(0,t.jsx)(P,{dtEdit:null!=b?b:null,showModal:l,setShowModal:i,halaman:e}),(0,t.jsx)(h.Z,{showDel:n,setShowDel:o,setDelete:f}),(0,t.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,t.jsx)("p",{children:"Silahkan Mengolah data Produk. Klik pada produk untuk mengolah data variasi produk."}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>{i(!0),_(null)},children:"Tambah Data"})]})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(j,{halaman:e,register:v,setValue:w,watch:y,control:S})}),(0,t.jsx)(r.Suspense,{children:(0,t.jsx)(p,{setDelete:f,setEdit:e=>{i(!0),_(e)}})})]})}}},function(e){e.O(0,[1779,1866,6990,4579,9501,9099,8848,4285,1560,9264,6702,2971,2117,1744],function(){return e(e.s=2969)}),_N_E=e.O()}]);