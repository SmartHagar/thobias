(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8007],{4157:function(t,a,e){Promise.resolve().then(e.bind(e,7269))},7165:function(t){(()=>{"use strict";var a={d:(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};a.r(e),a.d(e,{default:()=>s});var r=function(){var t;function a(){!function(t,a){if(!(t instanceof a))throw TypeError("Cannot call a class as a function")}(this,a)}return t=[{key:"changeHeightWidth",value:function(t,a,e,r,s,n){return e>r&&(t=Math.round(t*r/e),e=r),t>a&&(e=Math.round(e*a/t),t=a),s&&e<s&&(t=Math.round(t*s/e),e=s),n&&t<n&&(e=Math.round(e*n/t),t=n),{height:t,width:e}}},{key:"resizeAndRotateImage",value:function(t,a,e,r,s){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=document.createElement("canvas"),d=t.width,c=t.height,u=this.changeHeightWidth(c,e,d,a,r,s);i&&(90===i||270===i)?(o.width=u.height,o.height=u.width):(o.width=u.width,o.height=u.height),d=u.width,c=u.height;var h=o.getContext("2d");return h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,d,c),h.imageSmoothingEnabled&&h.imageSmoothingQuality&&(h.imageSmoothingQuality="high"),i&&(h.rotate(i*Math.PI/180),90===i?h.translate(0,-o.width):180===i?h.translate(-o.width,-o.height):270===i?h.translate(-o.height,0):0!==i&&360!==i||h.translate(0,0)),h.drawImage(t,0,0,d,c),o.toDataURL("image/".concat(n),l/100)}},{key:"b64toByteArrays",value:function(t,a){a=a||"image/jpeg";for(var e=atob(t.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],s=0;s<e.length;s+=512){for(var n=e.slice(s,s+512),l=Array(n.length),i=0;i<n.length;i++)l[i]=n.charCodeAt(i);var o=new Uint8Array(l);r.push(o)}return r}},{key:"b64toBlob",value:function(t,a){return new Blob(this.b64toByteArrays(t,a),{type:a,lastModified:new Date})}},{key:"b64toFile",value:function(t,a,e){return new File(this.b64toByteArrays(t,e),a,{type:e,lastModified:new Date})}},{key:"createResizedImage",value:function(t,e,r,s,n,l,i){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=new FileReader;if(!t)throw Error("File Not Found!");if(t.type&&!t.type.includes("image"))throw Error("File Is NOT Image!");u.readAsDataURL(t),u.onload=function(){var h=new Image;h.src=u.result,h.onload=function(){var u=a.resizeAndRotateImage(h,e,r,d,c,s,n,l),g="image/".concat(s);switch(o){case"blob":i(a.b64toBlob(u,g));break;case"base64":default:i(u);break;case"file":var p=t.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(s.toString());i(a.b64toFile(u,p,g))}}},u.onerror=function(t){throw Error(t)}}}],function(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a,t),a}();let s={imageFileResizer:function(t,a,e,s,n,l,i,o,d,c){return r.createResizedImage(t,a,e,s,n,l,i,o,d,c)}};t.exports=e})()},7269:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return A}});var r=e(7437),s=e(2265),n=e(1971),l=e(8745),i=e(9376),o=e(8946),d=e.n(o),c=e(3011),u=e(6885),h=e(4061),g=e(4010);let p=(0,c.U)((0,u.mW)(t=>({dtVariants:{last_page:0,current_page:0,data:[]},setVariants:async a=>{let{page:e=1,limit:r=10,search:s,sortby:n,order:l,product_id:i}=a;try{let a=await g.Z.getState().setToken(),o=await (0,h.Sj)({method:"get",url:"/productVariants",headers:{Authorization:"Bearer ".concat(a)},params:{limit:r,page:e,search:s,sortby:n,order:l,product_id:i}});return t(t=>({...t,dtVariants:o.data.data})),console.log({response:o}),{status:"berhasil",data:o.data}}catch(t){var o;return{status:"error",error:null===(o=t.response)||void 0===o?void 0:o.data}}},setShowVariants:async a=>{try{let e=await g.Z.getState().setToken(),r=await (0,h.Sj)({method:"get",url:"/productVariants/".concat(a),headers:{Authorization:"Bearer ".concat(e)}});return t(t=>({...t,showVariants:r.data.data})),{status:"berhasil",data:r.data}}catch(t){var e;return{status:"error",error:null===(e=t.response)||void 0===e?void 0:e.data}}},addData:async a=>{try{let e=await g.Z.getState().setToken(),r=await (0,h.Sj)({method:"post",url:"/productVariants",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"},data:a});return t(t=>({dtVariants:{last_page:t.dtVariants.last_page,current_page:t.dtVariants.current_page,data:[r.data.data,...t.dtVariants.data]}})),{status:"berhasil tambah",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},removeData:async a=>{try{let e=await g.Z.getState().setToken(),r=await (0,h.Sj)({method:"delete",url:"/productVariants/".concat(a),headers:{Authorization:"Bearer ".concat(e)}});return t(t=>({dtVariants:{last_page:t.dtVariants.last_page,current_page:t.dtVariants.current_page,data:t.dtVariants.data.filter(t=>t.id!==a)}})),{status:"berhasil hapus",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},updateData:async(a,e)=>{try{let r=await g.Z.getState().setToken(),s=await (0,h.Sj)({method:"POST",url:"/productVariants/".concat(a,"?_method=PUT"),headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"},data:e});return t(t=>({dtVariants:{last_page:t.dtVariants.last_page,current_page:t.dtVariants.current_page,data:t.dtVariants.data.map(t=>t.id===a?{...t,...s.data.data}:t)}})),{status:"berhasil update",data:s.data}}catch(t){return{status:"error",data:t.response.data}}}})));var m=t=>{let{setDelete:a,setEdit:e,productId:o}=t,{setVariants:c,dtVariants:u}=p(),[h,g]=(0,s.useState)(1),[m,f]=(0,s.useState)(10),[v,b]=(0,s.useState)(!0),x=(0,i.useSearchParams)(),y=(null==x?void 0:x.get("sortby"))||"",w=(null==x?void 0:x.get("order"))||"",j=(null==x?void 0:x.get("cari"))||"",S=d().debounce(t=>{t()},500),k=(0,s.useCallback)(async()=>{f(10),await c({page:h,limit:m,search:j,sortby:y,order:w,product_id:o}),b(!1)},[c,h,m,j,y,w,o]);return(0,s.useEffect)(()=>(S(k),()=>{S.cancel()}),[j,y,w,h,m]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:v?(0,r.jsx)("span",{className:"loading loading-dots loading-lg"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(l.Z,{headTable:["No","Warna","Ukuran","Harga","Stok","Gambar","Aksi"],tableBodies:["color","size","price","stock","variant_img"],dataTable:null==u?void 0:u.data,page:h,limit:m,setEdit:e,setDelete:a,ubah:!0,hapus:!0})}),(null==u?void 0:u.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n.Z,{currentPage:null==u?void 0:u.current_page,totalPages:null==u?void 0:u.last_page,setPage:g})})]})})},f=e(6433),v=e(9064),b=e(543),x=e(2841),y=e(1400),w=t=>{let{register:a,setValue:e,watch:s,halaman:n}=t;return(0,r.jsx)("div",{className:"grid grid-cols-8 gap-2 w-full",children:(0,r.jsx)(y.Z,{watch:s,setValue:e,name:"cari",register:a,placeholder:"Cari data ".concat(n),addClass:"col-span-8"})})},j=e(9501),S=e(1505),k=e(9762),_=e(446),N=e(3498),P=t=>{let{register:a,errors:e,control:s,dtEdit:n,setValue:l,watch:i}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{label:"Warna",name:"color",register:a,errors:e.color,addClass:"col-span-8 lg:col-span-4"}),(0,r.jsx)(S.Z,{label:"Ukuran",name:"size",register:a,errors:e.size,addClass:"col-span-8 lg:col-span-4"}),(0,r.jsx)(S.Z,{label:"Stock",name:"stock",register:a,errors:e.stock,required:!0,type:"number",min:1,addClass:"col-span-8 lg:col-span-2"}),(0,r.jsx)(N.Z,{label:"Harga",control:s,name:"price",errors:e.price,addClass:"col-span-8  lg:col-span-6",required:!0,minLength:1}),(0,r.jsx)(_.Z,{label:"Gambar Varian",name:"variant_img",register:a,accept:"image/*",errors:e.variant_img,addClass:"col-span-4",setValue:l,fileEdit:null==n?void 0:n.variant_img,watch:i,required:!0})]})},V=e(7550),Z=t=>{let{showModal:a,setShowModal:e,dtEdit:n,halaman:l,productId:i}=t,{addData:o,updateData:d}=p(),[c,u]=(0,s.useState)(!1),{register:h,handleSubmit:g,setValue:m,control:f,formState:{errors:v},watch:x}=(0,j.cI)(),y=()=>{m("id",""),m("color",""),m("size",""),m("price",0),m("stock",1),m("variant_img","")};(0,s.useEffect)(()=>{n?(m("id",n.id),m("color",n.color),m("size",n.size),m("price",n.price),m("stock",n.stock)):y()},[a,n]);let w=async t=>{t.product_id=i,console.log({row:t}),(0,V.Z)({row:t,dtEdit:n,setIsLoading:u,setShowModal:e,addData:o,updateData:d,resetForm:y,toastShow:b.Z})};return(0,r.jsx)(k.Z,{title:"Form ".concat(l),showModal:a,setShowModal:e,width:"md:w-[50rem] lg:w-[65rem]",children:(0,r.jsxs)("form",{onSubmit:g(w),children:[(0,r.jsx)(S.Z,{name:"id",register:h,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-8 gap-2 mb-4",children:(0,r.jsx)(P,{register:h,errors:v,dtEdit:n,control:f,watch:x,setValue:m,showModal:a})}),(0,r.jsx)("div",{children:c?(0,r.jsx)("span",{className:"loading loading-spinner loading-md"}):(0,r.jsx)("button",{className:"btn btn-primary",onClick:g(w),type:"submit",children:"Simpan"})})]})})},z=e(8278),T=e(7648),A=()=>{let t=(0,i.useSearchParams)(),a=(null==t?void 0:t.get("product_id"))||"",{removeData:e}=p(),{setShowProducts:n,showProduct:l}=(0,z.Z)(),o="Variasi Produk",{setWelcome:d}=(0,x.I)(),[c,u]=(0,s.useState)(!1),[h,g]=(0,s.useState)(!1),[y,S]=(0,s.useState)(),[k,_]=(0,s.useState)();(0,s.useEffect)(()=>{n(a)},[a]),(0,s.useEffect)(()=>(d("Halaman ".concat(o," - ").concat(null==l?void 0:l.product_nm)),()=>{}),[d,null==l?void 0:l.product_nm]);let N=async t=>{let{id:a,isDelete:r}=t;if(S(a),r){let{data:t}=await e(y);(0,b.Z)({event:t}),g(!1)}else g(!0)},{register:P,setValue:V,watch:A,control:C}=(0,j.cI)();return(0,r.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.x7,{}),(0,r.jsx)(Z,{dtEdit:null!=k?k:null,showModal:c,setShowModal:u,halaman:o,productId:a}),(0,r.jsx)(f.Z,{showDel:h,setShowDel:g,setDelete:N}),(0,r.jsx)(T.default,{className:"text-neutral underline hover:no-underline",href:"/products/lists",children:"Kembali"}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsxs)("p",{children:["Silahkan Mengolah data ",o,". Klik pada varian untuk mengolah data gambar pada setiap varian."]}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>{u(!0),_(null)},children:"Tambah Data"})]})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(w,{halaman:o,register:P,setValue:V,watch:A,control:C})}),(0,r.jsx)(s.Suspense,{children:(0,r.jsx)(m,{setDelete:N,setEdit:t=>{u(!0),_(t)},productId:a})})]})}},446:function(t,a,e){"use strict";var r=e(7437),s=e(4061),n=e(3145),l=e(2265),i=e(7165),o=e.n(i);a.Z=t=>{let{label:a,register:e,required:i,name:d,errors:c,addClass:u,accept:h,setValue:g,fileEdit:p,initialValue:m,watch:f,size:v="md",labelCss:b="text-gray-700"}=t,[x,y]=(0,l.useState)(),[w,j]=(0,l.useState)(m||""),S=f(d);(0,l.useEffect)(()=>{S||j("")},[S]);let k=t=>new Promise(()=>{let a="sm"===v?500:"md"===v?1e3:1600;if(t){var e;let r=(null==t?void 0:null===(e=t.type)||void 0===e?void 0:e.split("/"))||[];if("image"!==r[0])return _(t);o().imageFileResizer(t,a,a,r[1],100,0,t=>{_(t)},"file")}else _(null)}),_=t=>{var a;if(t){let a=new FileReader;a.readAsDataURL(t),a.onloadend=()=>{j(a.result)}}y(((null==t?void 0:null===(a=t.type)||void 0===a?void 0:a.split("/"))||[])[0]),g(d,t)};return(0,r.jsxs)("div",{className:u,children:[a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{className:"text-sm font-medium tracking-wide ".concat(b),children:a}),i&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),!i&&(0,r.jsx)("span",{className:"text-sm font-medium tracking-wide ".concat(b),children:"(Optional)"})]}),(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:h,onChange:t=>{var a;k((null===(a=t.target)||void 0===a?void 0:a.files[0])||null)}}),(0,r.jsx)("input",{type:"hidden",id:a,...e(d,{required:i})}),(0,r.jsxs)("div",{className:"flex gap-4 mt-2",children:[w&&"image"===x&&(0,r.jsx)(n.default,{className:"rounded-lg",src:w,width:100,height:100,alt:""}),p&&"file"!==d&&"file_materi"!==d&&(0,r.jsx)("div",{children:(0,r.jsx)(n.default,{src:"".concat(s._n,"/").concat(p),width:100,height:100,alt:""})})]}),(null==c?void 0:c.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]})]})}},3498:function(t,a,e){"use strict";var r=e(7437),s=e(9501),n=e(1560);a.Z=t=>{let{label:a,required:e,name:l,minLength:i,maxLength:o,errors:d,control:c,addClass:u}=t;return(0,r.jsxs)("div",{className:u,children:[(0,r.jsx)("label",{htmlFor:l,className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),e&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(s.Qr,{name:l,control:c,rules:{required:e},render:t=>{let{field:a}=t;return(0,r.jsx)(n.h3,{id:l,type:"text",autoComplete:"off",thousandSeparator:",",prefix:"Rp. ",value:a.value,onValueChange:(t,e)=>{console.log(t,e),a.onChange(t.floatValue||"")},className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary"})}})}),(null==d?void 0:d.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kurang dari ",i," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh lebih dari ",o," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," hanya boleh angka."]})]})}},8278:function(t,a,e){"use strict";var r=e(3011),s=e(6885),n=e(4061),l=e(4010);let i=(0,r.U)((0,s.mW)(t=>({dtProducts:{last_page:0,current_page:0,data:[]},setProducts:async a=>{let{page:e=1,limit:r=10,search:s,sortby:i,order:o}=a;try{let a=await l.Z.getState().setToken(),d=await (0,n.Sj)({method:"get",url:"/products",headers:{Authorization:"Bearer ".concat(a)},params:{limit:r,page:e,search:s,sortby:i,order:o}});return t(t=>({...t,dtProducts:d.data.data})),console.log({response:d}),{status:"berhasil",data:d.data}}catch(t){var d;return{status:"error",error:null===(d=t.response)||void 0===d?void 0:d.data}}},setShowProducts:async a=>{try{let e=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/products/".concat(a),headers:{Authorization:"Bearer ".concat(e)}});return t(t=>({...t,showProduct:r.data.data})),{status:"berhasil",data:r.data}}catch(t){var e;return{status:"error",error:null===(e=t.response)||void 0===e?void 0:e.data}}},addData:async a=>{try{let e=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"post",url:"/products",headers:{Authorization:"Bearer ".concat(e)},data:a});return t(t=>({dtProducts:{last_page:t.dtProducts.last_page,current_page:t.dtProducts.current_page,data:[r.data.data,...t.dtProducts.data]}})),{status:"berhasil tambah",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},removeData:async a=>{try{let e=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/products/".concat(a),headers:{Authorization:"Bearer ".concat(e)}});return t(t=>({dtProducts:{last_page:t.dtProducts.last_page,current_page:t.dtProducts.current_page,data:t.dtProducts.data.filter(t=>t.id!==a)}})),{status:"berhasil hapus",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},updateData:async(a,e)=>{try{let r=await l.Z.getState().setToken(),s=await (0,n.Sj)({method:"PUT",url:"/products/".concat(a),headers:{Authorization:"Bearer ".concat(r)},data:e});return t(t=>({dtProducts:{last_page:t.dtProducts.last_page,current_page:t.dtProducts.current_page,data:t.dtProducts.data.map(t=>t.id===a?{...t,...s.data.data}:t)}})),{status:"berhasil update",data:s.data}}catch(t){return{status:"error",data:t.response.data}}}})));a.Z=i}},function(t){t.O(0,[1779,1866,6990,4579,9501,9099,8848,1560,7648,9264,2971,2117,1744],function(){return t(t.s=4157)}),_N_E=t.O()}]);