(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{1661:function(e,a,s){Promise.resolve().then(s.bind(s,8326))},8326:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return J}});var t=s(7437),r=s(8201),l=s(2265),i=s(693),d=s(5842),n=s(3826),c=s(6974),o=s(7648),u=s(6326),m=s(1014),p=s(6995),h=()=>{var e;let{dtOrders:a}=(0,p.Z)(),[s,r]=(0,l.useState)(0),[i,n]=(0,l.useState)(0);return(0,l.useEffect)(()=>{if(null==a?void 0:a.data){var e,s;let t=["dikemas","dikirim"],l=null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.filter(e=>{var a;return t.includes(null==e?void 0:null===(a=e.shipping_status)||void 0===a?void 0:a.status)}),i=null==a?void 0:null===(s=a.data)||void 0===s?void 0:s.filter(e=>"batal"===e.status);r((null==l?void 0:l.length)||0),n((null==i?void 0:i.length)||0)}},[a]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"overview grid sm:grid-cols-3 gap-5",children:[(0,t.jsxs)("div",{className:"item flex items-center justify-between p-5 border border-line rounded-lg box-shadow-xs",children:[(0,t.jsxs)("div",{className:"counter",children:[(0,t.jsx)("span",{className:"text-secondary",children:"Proses"}),(0,t.jsx)("h5",{className:"heading5 mt-1",children:s})]}),(0,t.jsx)(u.S,{className:"text-4xl"})]}),(0,t.jsxs)("div",{className:"item flex items-center justify-between p-5 border border-line rounded-lg box-shadow-xs",children:[(0,t.jsxs)("div",{className:"counter",children:[(0,t.jsx)("span",{className:"text-secondary",children:"Order Batal"}),(0,t.jsx)("h5",{className:"heading5 mt-1",children:i})]}),(0,t.jsx)(m.C,{className:"text-4xl"})]}),(0,t.jsxs)("div",{className:"item flex items-center justify-between p-5 border border-line rounded-lg box-shadow-xs",children:[(0,t.jsxs)("div",{className:"counter",children:[(0,t.jsx)("span",{className:"text-secondary",children:"Jumlah Order"}),(0,t.jsx)("h5",{className:"heading5 mt-1",children:(null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.length)||0})]}),(0,t.jsx)(d.G,{className:"text-4xl"})]})]})})},x=s(3145),v=s(3810),g=s(4561),b=s(393),j=s(4061),N=s(9376),f=s(3488),w=s(7398),y=s.n(w),_=e=>{let{order:a}=e,[s,r]=(0,l.useState)("");return(0,l.useEffect)(()=>{let e=(0,f.w)(null==a?void 0:a.created_at).add(60,"minutes"),s=setInterval(()=>{let a=(0,f.w)(),t=y().duration(e.diff(a));r("".concat(t.hours()," jam, ").concat(t.minutes()," menit, ").concat(t.seconds()," detik")),0>=t.asSeconds()&&(clearInterval(s),r("waktu pembayaran habis"))},1e3);return()=>clearInterval(s)},[null==a?void 0:a.created_at]),(0,l.useEffect)(()=>{"waktu pembayaran habis"===s&&(null==a?void 0:a.status)==="belum bayar"&&j.hi.post("/orders/update/".concat(null==a?void 0:a.id),{status:"batal"})},[null==a?void 0:a.id,null==a?void 0:a.status,s]),(0,t.jsx)("span",{className:"capitalize",children:s})},k=e=>{var a;let{dtUser:s,activeTab:r}=e,{openReview:i}=(0,g.f)(),d=(0,N.useRouter)(),{setOrdersAll:n,dtOrders:c}=(0,p.Z)(),[u,m]=(0,l.useState)("semua"),[h,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>("orders"===r&&s.user.id&&n({user_id:s.user.id,status:u}),()=>{}),[u,r,s.user.id,n]),(0,l.useEffect)(()=>{let e=document.createElement("script");return e.src="https://app.sandbox.midtrans.com/snap/snap.js",e.setAttribute("data-client-key",j.c1||""),e.onload=()=>f(!0),document.body.appendChild(e),()=>{document.body.removeChild(e)}},[]);let w=e=>{i(e)},y=e=>{m(e)},k=async e=>{if(!h){alert("Snap.js is not loaded yet!");return}window.snap.pay(e.snap_token,{onSuccess:function(e){console.log({result:e})},onPending:function(e){console.log({result:e})},onError:function(e){console.log({result:e})},onClose:function(){d.push("/account?tab=orders&history_order=semua"),console.log("user closed the popup without finishing payment")}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h6",{className:"heading6",children:"Pesanan Saya"}),(0,t.jsx)("div",{className:"w-full overflow-x-auto",children:(0,t.jsx)("div",{className:"menu-tab grid grid-cols-5 max-lg:w-[500px] border-b border-line mt-3",children:["semua","belum bayar","dikirim","selesai","batal"].map((e,a)=>(0,t.jsxs)("button",{className:"item relative px-3 py-2.5 text-secondary whitespace-nowrap text-center duration-300 hover:text-black border-b-2 ".concat(u===e?"active border-black":"border-transparent"),onClick:()=>y(e),children:[u===e&&(0,t.jsx)(v.E.span,{layoutId:"active-pill",className:"absolute inset-0 border-black border-b-2"}),(0,t.jsx)("span",{className:"relative text-button z-[1]",children:e})]},a))})}),(0,t.jsx)("div",{className:"list_order",children:null==c?void 0:null===(a=c.data)||void 0===a?void 0:a.map(e=>{var a,s,r,l,i;return(0,t.jsxs)("div",{className:"order_item mt-5 border border-line rounded-lg box-shadow-xs",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 p-5 border-b border-line",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("strong",{className:"text-title",children:"Order ID:"}),(0,t.jsx)("strong",{className:"order_number text-button uppercase",children:e.id})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("strong",{className:"text-title",children:"Order status:"}),(0,t.jsx)("span",{className:"tag px-4 py-1.5 rounded-full bg-opacity-10 capitalize \n                  ".concat((null===(a=e.shipping_status)||void 0===a?void 0:a.status)==="dikirim"?"bg-purple text-purple":(null==e?void 0:e.status)==="belum bayar"?"bg-yellow text-yellow":(null==e?void 0:null===(s=e.shipping_status)||void 0===s?void 0:s.status)==="selesai"?"bg-green text-green":"bg-red text-red"," caption1 font-semibold"),children:(null==e?void 0:null===(r=e.shipping_status)||void 0===r?void 0:r.status)||e.status})]})]}),(0,t.jsx)("div",{className:"list_prd px-5",children:e.order_items.map((e,a)=>{var s,r,l;let i=e.product_variant_id?e.product_variant.variant_img:null===(s=e.product.product_image.find(e=>e.is_main))||void 0===s?void 0:s.product_img;return(0,t.jsx)("div",{className:"prd_item flex flex-wrap items-center justify-between gap-3 border-b border-line",children:(0,t.jsxs)(o.default,{href:"/product/detail?id="+e.product.id,className:"flex items-center gap-5",children:[(0,t.jsx)("div",{className:"bg-img flex-shrink-0 md:w-[100px] w-20 aspect-square rounded-lg overflow-hidden",children:(0,t.jsx)(x.default,{src:"".concat(j._n,"/").concat(i),width:1e3,height:1e3,alt:e.product.product_nm,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"prd_name text-title",children:e.product.product_nm}),(0,t.jsxs)("div",{className:"caption1 text-secondary mt-2",children:[(0,t.jsx)("span",{className:"prd_size uppercase",children:null==e?void 0:null===(r=e.product_variant)||void 0===r?void 0:r.size}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)("span",{className:"prd_color capitalize",children:null==e?void 0:null===(l=e.product_variant)||void 0===l?void 0:l.color})]})]})]})},a)})}),(0,t.jsxs)("div",{className:"discount-block py-1 flex justify-between border-b border-line",children:[(0,t.jsx)("div",{className:"text-title",children:"Ongkir"}),(0,t.jsx)("div",{className:"text-title",children:(0,t.jsx)("span",{children:(0,b.Z)(e.shipping_cost)})})]}),(0,t.jsxs)("div",{className:"ship-block py-1 flex justify-between border-b border-line",children:[(0,t.jsx)("div",{className:"text-title",children:"Belanja"}),(0,t.jsx)("div",{className:"text-title",children:(0,b.Z)(e.total_price)})]}),(0,t.jsxs)("div",{className:"total-cart-block py-1 flex justify-between",children:[(0,t.jsx)("div",{className:"heading5",children:"Total"}),(0,t.jsx)("div",{className:"heading5 total-cart",children:(0,b.Z)(e.total_payment)})]}),"belum bayar"===e.status&&(0,t.jsxs)("div",{className:"ship-block py-1 flex justify-between border-b border-line",children:[(0,t.jsx)("div",{className:"text-title",children:"Sisa Waktu Pembayaran"}),(0,t.jsx)("div",{className:"text-title",children:(0,t.jsx)(_,{order:e})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 p-5",children:["belum bayar"===e.status||"tunggu"===e.status&&(0,t.jsx)("button",{className:"button-main",onClick:()=>k(e),children:"Bayar sekarang"}),(null==e?void 0:null===(l=e.shipping_status)||void 0===l?void 0:l.status)==="selesai"&&(0,t.jsx)("button",{className:"button-main",onClick:()=>w(e),children:(null==e?void 0:null===(i=e.review)||void 0===i?void 0:i.length)>0?"Lihat Review":"Beri Nilai"})]})]},e.id)})})]})},Z=s(4210),S=s(9501),P=s(3842),R=s(4422),q=s(3011),C=s(6885);let z=(0,q.U)((0,C.mW)(e=>({dtVillage:[],setVillage:async()=>{try{let a=await (0,j.hi)({method:"get",url:"/villages"});return e(e=>({...e,dtVillage:a.data.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setVillageAll:async()=>{try{let a=await (0,j.hi)({method:"get",url:"/villages/all"});return e(e=>({...e,dtVillage:a.data.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setShowVillage:async a=>{try{let s=await (0,j.hi)({method:"get",url:"/villages/".concat(a)});return e(e=>({...e,showCategory:s.data.data})),{status:"berhasil",data:s.data}}catch(e){return{status:"error",error:e.response.data}}}})));var F=s(1398),E=s(543);let A=R.Ry().shape({nm_recipient:R.Z_().required("Name harus diisi"),phone:R.Z_().required("Phone harus diisi"),address:R.Z_().required("Address harus diisi"),village_id:R.Z_().required("Village harus diisi")});var B=e=>{var a,s,r,i,d,n,c,o,u,m;let{dtUser:p,activeTab:h}=e,[x,v]=(0,l.useState)("billing"),[g,b]=(0,l.useState)(!1),{setVillageAll:j,dtVillage:N}=z(),{setRecipients:f,dtRecipients:w,addData:y,updateData:_}=(0,F.Z)();(0,l.useEffect)(()=>{"address"===h&&(j(),f({user_id:p.user.id}))},[h,p.user.id,f,j]);let k=e=>{v(a=>a===e?null:e)},{register:R,handleSubmit:q,formState:{errors:C},setValue:B}=(0,S.cI)({resolver:(0,P.X)(A),mode:"onChange"});(0,l.useEffect)(()=>{var e,a,s,t,r,l,i,d,n;(null==w?void 0:null===(e=w.data)||void 0===e?void 0:e[0])&&(B("nm_recipient",null==w?void 0:null===(s=w.data)||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:a.nm_recipient),B("phone",null==w?void 0:null===(r=w.data)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.phone),B("address",null==w?void 0:null===(i=w.data)||void 0===i?void 0:null===(l=i[0])||void 0===l?void 0:l.address),B("village_id",null==w?void 0:null===(n=w.data)||void 0===n?void 0:null===(d=n[0])||void 0===d?void 0:d.village_id))},[w,B]);let O=async e=>{var a,s,t,r;let l;b(!0);let i=null==w?void 0:null===(s=w.data)||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:a.id;e.user_id=p.user.id,e.is_active=!0,console.log({res:l=i?await _(null==w?void 0:null===(r=w.data)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.id,e):await y(e)}),(0,E.Z)({event:{type:l.data.type,message:l.data.message}}),b(!1)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("form",{onSubmit:q(O),children:[(0,t.jsx)("input",{type:"text",defaultValue:null==w?void 0:null===(s=w.data)||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:a.id,name:"id",hidden:!0}),(0,t.jsxs)("button",{type:"button",className:"tab_btn flex items-center justify-between w-full pb-1.5 border-b border-line ".concat("billing"===x?"active":""),onClick:()=>k("billing"),children:[(0,t.jsx)("strong",{className:"heading6",children:"Form penerima"}),(0,t.jsx)(Z.p,{className:"text-2xl ic_down duration-300"})]}),(0,t.jsx)("div",{className:"form_address ".concat("billing"===x?"block":"hidden"),children:(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 gap-y-5 mt-5",children:[(0,t.jsxs)("div",{className:"first-name",children:[(0,t.jsxs)("label",{htmlFor:"billingFirstName",className:"caption1 capitalize",children:["Nama",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"billingFirstName",type:"text",defaultValue:null==w?void 0:null===(i=w.data)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.nm_recipient,...R("nm_recipient",{required:!0})}),C.nm_recipient&&(0,t.jsx)("span",{className:"text-red text-sm",children:C.nm_recipient.message})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("label",{htmlFor:"select-filter",className:"caption1 capitalize",children:["Kecamatan-Kelurahan",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("div",{className:"select-block relative",children:(0,t.jsxs)("select",{id:"select-filter",className:"caption1 w-full py-2 pl-3 md:pr-20 pr-10 rounded-lg border border-line",...R("village_id",{required:!0}),children:[(0,t.jsx)("option",{value:"",children:"Pilih Kecamatan-Kelurahan"}),N.map((e,a)=>(0,t.jsxs)("option",{value:e.id,children:[e.sub_district.sub_district_nm,"-",e.village_nm]},a))]})}),C.village_id&&(0,t.jsx)("span",{className:"text-red text-sm",children:C.village_id.message})]}),(0,t.jsxs)("div",{className:"phone",children:[(0,t.jsxs)("label",{htmlFor:"billingPhone",className:"caption1 capitalize",children:["No. HP ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"billingPhone",type:"text",defaultValue:(null==w?void 0:null===(n=w.data)||void 0===n?void 0:null===(d=n[0])||void 0===d?void 0:d.phone)||"",...R("phone",{required:!0})}),C.phone&&(0,t.jsx)("span",{className:"text-red text-sm",children:C.phone.message})]}),(0,t.jsxs)("div",{className:"street",children:[(0,t.jsxs)("label",{htmlFor:"billingStreet",className:"caption1 capitalize",children:["Alamat Lengkap ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"billingStreet",type:"text",defaultValue:(null==w?void 0:null===(o=w.data)||void 0===o?void 0:null===(c=o[0])||void 0===c?void 0:c.address)||"",...R("address",{required:!0})}),C.address&&(0,t.jsx)("span",{className:"text-red text-sm",children:C.address.message})]})]})}),(0,t.jsx)("div",{className:"block-button lg:mt-10 mt-6",children:g?(0,t.jsx)("span",{children:"Loading..."}):(0,t.jsx)("button",{className:"button-main",children:(null==w?void 0:null===(m=w.data)||void 0===m?void 0:null===(u=m[0])||void 0===u?void 0:u.id)?"Ubah":"Simpan"})})]})})},O=()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("form",{children:[(0,t.jsx)("div",{className:"heading5 pb-4",children:"Information"}),(0,t.jsxs)("div",{className:"upload_image col-span-full",children:[(0,t.jsxs)("label",{htmlFor:"uploadImage",children:["Upload Avatar: ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-5 mt-3",children:[(0,t.jsxs)("div",{className:"bg_img flex-shrink-0 relative w-[7.5rem] h-[7.5rem] rounded-lg overflow-hidden bg-surface",children:[(0,t.jsx)("span",{className:"ph ph-image text-5xl absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-secondary"}),(0,t.jsx)(x.default,{src:"/images/avatar/1.png",width:300,height:300,alt:"avatar",className:"upload_img relative z-[1] w-full h-full object-cover"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{className:"text-button",children:"Upload File:"}),(0,t.jsx)("p",{className:"caption1 text-secondary mt-1",children:"JPG 120x120px"}),(0,t.jsxs)("div",{className:"upload_file flex items-center gap-3 w-[220px] mt-3 px-3 py-2 border border-line rounded",children:[(0,t.jsx)("label",{htmlFor:"uploadImage",className:"caption2 py-1 px-3 rounded bg-line whitespace-nowrap cursor-pointer",children:"Choose File"}),(0,t.jsx)("input",{type:"file",name:"uploadImage",id:"uploadImage",accept:"image/*",className:"caption2 cursor-pointer",required:!0})]})]})]})]}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 gap-y-5 mt-5",children:[(0,t.jsxs)("div",{className:"first-name",children:[(0,t.jsxs)("label",{htmlFor:"firstName",className:"caption1 capitalize",children:["First Name ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"firstName",type:"text",defaultValue:"Tony",placeholder:"First name",required:!0})]}),(0,t.jsxs)("div",{className:"last-name",children:[(0,t.jsxs)("label",{htmlFor:"lastName",className:"caption1 capitalize",children:["Last Name ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"lastName",type:"text",defaultValue:"Nguyen",placeholder:"Last name",required:!0})]}),(0,t.jsxs)("div",{className:"phone-number",children:[(0,t.jsxs)("label",{htmlFor:"phoneNumber",className:"caption1 capitalize",children:["Phone Number ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"phoneNumber",type:"text",defaultValue:"(+12) 345 678 910",placeholder:"Phone number",required:!0})]}),(0,t.jsxs)("div",{className:"email",children:[(0,t.jsxs)("label",{htmlFor:"email",className:"caption1 capitalize",children:["Email Address ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"email",type:"email",defaultValue:"hi.avitex@gmail.com",placeholder:"Email address",required:!0})]}),(0,t.jsxs)("div",{className:"gender",children:[(0,t.jsxs)("label",{htmlFor:"gender",className:"caption1 capitalize",children:["Gender ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsxs)("div",{className:"select-block mt-2",children:[(0,t.jsxs)("select",{className:"border border-line px-4 py-3 w-full rounded-lg",id:"gender",name:"gender",defaultValue:"default",children:[(0,t.jsx)("option",{value:"default",disabled:!0,children:"Choose Gender"}),(0,t.jsx)("option",{value:"Male",children:"Male"}),(0,t.jsx)("option",{value:"Female",children:"Female"}),(0,t.jsx)("option",{value:"Other",children:"Other"})]}),(0,t.jsx)(Z.p,{className:"arrow-down text-lg"})]})]}),(0,t.jsxs)("div",{className:"birth",children:[(0,t.jsxs)("label",{htmlFor:"birth",className:"caption1",children:["Day of Birth ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"birth",type:"date",placeholder:"Day of Birth",required:!0})]})]}),(0,t.jsx)("div",{className:"heading5 pb-4 lg:mt-10 mt-6",children:"Change Password"}),(0,t.jsxs)("div",{className:"pass",children:[(0,t.jsxs)("label",{htmlFor:"password",className:"caption1",children:["Current password ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"password",type:"password",placeholder:"Password *",required:!0})]}),(0,t.jsxs)("div",{className:"new-pass mt-5",children:[(0,t.jsxs)("label",{htmlFor:"newPassword",className:"caption1",children:["New password ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"newPassword",type:"password",placeholder:"New Password *",required:!0})]}),(0,t.jsxs)("div",{className:"confirm-pass mt-5",children:[(0,t.jsxs)("label",{htmlFor:"confirmPassword",className:"caption1",children:["Confirm new password ",(0,t.jsx)("span",{className:"text-red",children:"*"})]}),(0,t.jsx)("input",{className:"border-line mt-2 px-4 py-3 w-full rounded-lg",id:"confirmPassword",type:"password",placeholder:"Confirm Password *",required:!0})]}),(0,t.jsx)("div",{className:"block-button lg:mt-10 mt-6",children:(0,t.jsx)("button",{className:"button-main",children:"Save Change"})})]})}),I=s(4131);let V=async e=>{let{setLogout:a,setLoadLogout:s,route:t}=e;s(!0);let r=await a();(null==r?void 0:r.status)==="success"&&(I.Z.remove("token"),I.Z.remove("role"),I.Z.remove("user"),setTimeout(()=>{s(!1)},1e3),t.push("/"))},T=(0,q.U)((0,C.mW)((e,a)=>({setToken:async()=>I.Z.get("token"),setLogout:async()=>{let e=await a().setToken();try{let a=await (0,j.I8)({method:"post",url:"/logout",headers:{Authorization:"Bearer ".concat(e)}});return await r.Z.getState().cekToken(),{status:"success",data:a.data}}catch(e){return{status:"error",error:e.response.data}}}})));var U=e=>{var a,s;let{dtUser:r}=e,u=(0,N.useSearchParams)().get("tab"),[m,x]=(0,l.useState)(!1),[v,g]=(0,l.useState)("dashboard"),b=(0,N.useRouter)(),{setOrdersAll:j}=(0,p.Z)(),{setLogout:f}=T();return(0,l.useEffect)(()=>{u&&g(u),"dashboard"===u&&j({user_id:r.user.id})},[r.user.id,j,u]),(0,t.jsx)("div",{className:"profile-block md:py-20 py-5",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"content-main flex gap-y-5 max-md:flex-col w-full",children:[(0,t.jsx)("div",{className:"left md:w-1/3 w-full xl:pr-[3.125rem] lg:pr-[28px] md:pr-[16px]",children:(0,t.jsxs)("div",{className:"user-infor bg-surface lg:px-7 px-4 lg:py-10 py-5 md:rounded-[20px] rounded-xl",children:[(0,t.jsxs)("div",{className:"heading flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"name heading6 mt-4 text-center",children:null==r?void 0:null===(a=r.user)||void 0===a?void 0:a.name}),(0,t.jsx)("div",{className:"mail heading6 font-normal normal-case text-secondary text-center mt-1",children:null==r?void 0:null===(s=r.user)||void 0===s?void 0:s.email})]}),(0,t.jsxs)("div",{className:"menu-tab w-full max-w-none lg:mt-10 mt-6",children:[(0,t.jsxs)(o.default,{href:"?tab=dashboard",scroll:!1,className:"item flex items-center gap-3 w-full px-5 py-2 rounded-lg cursor-pointer duration-300 hover:bg-white ".concat("dashboard"===v?"active":""),onClick:()=>g("dashboard"),children:[(0,t.jsx)(i.R,{size:20}),(0,t.jsx)("strong",{className:"heading6",children:"Dashboard"})]}),(0,t.jsxs)(o.default,{href:"?tab=orders",scroll:!1,className:"item flex items-center gap-3 w-full px-5 py-2 rounded-lg cursor-pointer duration-300 hover:bg-white mt-1.5 ".concat("orders"===v?"active":""),onClick:()=>g("orders"),children:[(0,t.jsx)(d.G,{size:20}),(0,t.jsx)("strong",{className:"heading6",children:"Riwayat Pesan"})]}),(0,t.jsxs)(o.default,{href:"?tab=address",scroll:!1,className:"item flex items-center gap-3 w-full px-5 py-2 rounded-lg cursor-pointer duration-300 hover:bg-white mt-1.5 ".concat("address"===v?"active":""),onClick:()=>g("address"),children:[(0,t.jsx)(n.V,{size:20}),(0,t.jsx)("strong",{className:"heading6",children:"Penerima"})]}),m?(0,t.jsx)("span",{className:"animate-spin inline-block w-6 h-6 border-[3px] border-current border-t-transparent text-primary rounded-full"}):(0,t.jsxs)("div",{onClick:()=>{V({setLogout:f,setLoadLogout:x,route:b})},className:"item flex items-center gap-3 w-full px-5 py-2 rounded-lg cursor-pointer duration-300 hover:bg-white mt-1.5",children:[(0,t.jsx)(c.l,{size:20}),(0,t.jsx)("strong",{className:"heading6",children:"Logout"})]})]})]})}),(0,t.jsxs)("div",{className:"right md:w-2/3 w-full pl-2.5",children:[(0,t.jsx)("div",{className:"tab text-content w-full ".concat("dashboard"===v?"block":"hidden"),children:(0,t.jsx)(h,{})}),(0,t.jsx)("div",{className:"tab text-content overflow-hidden w-full p-7 border border-line rounded-xl ".concat("orders"===v?"block":"hidden"),children:(0,t.jsx)(k,{dtUser:r,activeTab:v})}),(0,t.jsx)("div",{className:"tab_address text-content w-full p-7 border border-line rounded-xl ".concat("address"===v?"block":"hidden"),children:(0,t.jsx)(B,{dtUser:r,activeTab:v})}),(0,t.jsx)("div",{className:"tab text-content w-full p-7 border border-line rounded-xl ".concat("setting"===v?"block":"hidden"),children:(0,t.jsx)(O,{})})]})]})})})},L=s(9064);let D=R.Ry().shape({name:R.Z_().required("Name harus diisi"),email:R.Z_().email("Email tidak valid").required("Email harus diisi"),password:R.Z_().required("Password harus diisi").min(8,"Password minimal 8 karakter"),confirmPassword:R.Z_().required("Konfirmasi password harus diisi").oneOf([R.iH("password")],"Konfirmasi password tidak cocok")});var M=e=>{let{setIsRegister:a}=e,{setRegister:s}=(0,r.Z)(),{register:l,handleSubmit:i,formState:{errors:d}}=(0,S.cI)({resolver:(0,P.X)(D),mode:"onChange"}),n=async e=>{let t=await s(e);if("success"===t.status){let{token:e,role:s,user:r}=t.data;I.Z.set("token",e),I.Z.set("role",s),I.Z.set("user",JSON.stringify(r)),a(!1)}else(0,E.Z)({event:{type:t.status,message:t.error.message}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.x7,{}),(0,t.jsx)("div",{className:"register-block md:py-20 py-10",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"content-main flex gap-y-8 max-md:flex-col",children:[(0,t.jsxs)("div",{className:"left md:w-1/2 w-full lg:pr-[60px] md:pr-[40px] md:border-r border-line",children:[(0,t.jsx)("div",{className:"heading4",children:"Daftar"}),(0,t.jsxs)("form",{className:"md:mt-7 mt-4",onSubmit:i(n),children:[(0,t.jsxs)("div",{className:"pass",children:[(0,t.jsx)("input",{className:"border-line px-4 pt-3 pb-3 w-full rounded-lg",id:"name",type:"name",placeholder:"Nama *",...l("name",{required:!0})}),d.name&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:d.name.message})]}),(0,t.jsxs)("div",{className:"email mt-5",children:[(0,t.jsx)("input",{className:"border-line px-4 pt-3 pb-3 w-full rounded-lg",id:"username",placeholder:"Alamat Email *",...l("email",{required:!0})}),d.email&&(0,t.jsx)("p",{className:"text-red text-sm",children:d.email.message})]}),(0,t.jsxs)("div",{className:"pass mt-5",children:[(0,t.jsx)("input",{className:"border-line px-4 pt-3 pb-3 w-full rounded-lg",id:"password",type:"password",placeholder:"Password *",...l("password",{required:!0})}),d.password&&(0,t.jsx)("p",{className:"text-red text-sm",children:d.password.message})]}),(0,t.jsxs)("div",{className:"confirm-pass mt-5",children:[(0,t.jsx)("input",{className:"border-line px-4 pt-3 pb-3 w-full rounded-lg",id:"confirmPassword",type:"password",placeholder:"Confirm Password *",...l("confirmPassword",{required:!0})}),d.confirmPassword&&(0,t.jsx)("p",{className:"text-red text-sm",children:d.confirmPassword.message})]}),(0,t.jsx)("div",{className:"block-button md:mt-7 mt-4",children:(0,t.jsx)("button",{className:"button-main",children:"Register"})})]})]}),(0,t.jsx)("div",{className:"right md:w-1/2 w-full lg:pl-[60px] md:pl-[40px] flex items-center",children:(0,t.jsxs)("div",{className:"text-content",children:[(0,t.jsx)("div",{className:"heading4",children:"Sudah punya akun?"}),(0,t.jsx)("div",{className:"mt-2 text-secondary",children:"Selamat datang kembali. Masuk untuk mengakses pengalaman pribadi Anda, preferensi yang disimpan, dan banyak lagi. Kami sangat senang memiliki Anda bersama kami lagi!"}),(0,t.jsx)("div",{className:"block-button md:mt-7 mt-4",children:(0,t.jsx)("button",{onClick:()=>a(!1),className:"button-main",children:"Login"})})]})})]})})})]})};let W=R.Ry().shape({email:R.Z_().email("Email tidak valid").required("Email harus diisi"),password:R.Z_().required("Password harus diisi")});var K=()=>{let[e,a]=(0,l.useState)(!1),[s,i]=(0,l.useState)(""),{setLogin:d,cekToken:n}=(0,r.Z)(),{register:c,handleSubmit:o,formState:{errors:u}}=(0,S.cI)({resolver:(0,P.X)(W),mode:"onChange"}),m=e=>{window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(e))},p=async e=>{let a=await d(e);if(i(""),"success"===a.status){let{token:e,role:s,user:t}=a.data,r=JSON.stringify(t);I.Z.set("token",e),I.Z.set("role",s),I.Z.set("user",r),m(r),n()}"error"===a.status&&i(a.error.message)};return console.log({error:s}),e?e&&(0,t.jsx)(M,{setIsRegister:a}):(0,t.jsx)("div",{className:"login-block md:py-20 py-10",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"content-main flex gap-y-8 max-md:flex-col",children:[(0,t.jsxs)("div",{className:"left md:w-1/2 w-full lg:pr-[60px] md:pr-[40px] md:border-r border-line",children:[(0,t.jsx)("div",{className:"heading4",children:"Login"}),(0,t.jsx)("p",{className:"text-red",children:s}),(0,t.jsxs)("form",{className:"md:mt-7 mt-4",onSubmit:o(p),children:[(0,t.jsxs)("div",{className:"email ",children:[(0,t.jsx)("input",{className:"border-line px-4 pt-3 pb-3 w-full rounded-lg",id:"username",type:"email",placeholder:"Alamat Email *",...c("email",{required:!0})}),u.email&&(0,t.jsx)("span",{className:"text-red",children:u.email.message})]}),(0,t.jsxs)("div",{className:"pass mt-5",children:[(0,t.jsx)("input",{className:"border-line px-4 pt-3 pb-3 w-full rounded-lg",id:"password",type:"password",placeholder:"Password *",required:!0,...c("password",{required:!0})}),u.password&&(0,t.jsx)("span",{className:"text-red",children:u.password.message})]}),(0,t.jsx)("div",{className:"flex items-center justify-between mt-5"}),(0,t.jsx)("div",{className:"block-button md:mt-7 mt-4",children:(0,t.jsx)("button",{className:"button-main",children:"Login"})})]})]}),(0,t.jsx)("div",{className:"right md:w-1/2 w-full lg:pl-[60px] md:pl-[40px] flex items-center",children:(0,t.jsxs)("div",{className:"text-content",children:[(0,t.jsx)("div",{className:"heading4",children:"Pelanggan Baru"}),(0,t.jsx)("div",{className:"mt-2 text-secondary",children:"Jadilah bagian dari keluarga pelanggan baru kami yang terus bertambah! Bergabunglah dengan kami hari ini dan buka dunia manfaat, penawaran, dan pengalaman yang dipersonalisasi."}),(0,t.jsx)("div",{className:"block-button md:mt-7 mt-4",children:(0,t.jsx)("button",{type:"button",onClick:()=>a(!0),className:"button-main",children:"Daftar"})})]})})]})})})},G=s(9058),J=()=>{let{cekToken:e,dtUser:a}=(0,r.Z)(),[s,i]=(0,l.useState)(!0);return((0,l.useEffect)(()=>(i(!0),e(),i(!1),()=>{}),[]),console.log({dtUser:a}),s)?(0,t.jsx)("div",{className:"h-full w-screen flex items-center justify-center",children:(0,t.jsx)(G.Z,{})}):(0,t.jsxs)("main",{children:[(0,t.jsx)(L.x7,{}),!s&&a?(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)(G.Z,{}),children:(0,t.jsx)(U,{dtUser:a})}):(0,t.jsx)("section",{children:(0,t.jsx)(K,{})})]})}},9058:function(e,a,s){"use strict";var t=s(7437);s(2265);var r=s(1914),l=s.n(r);a.Z=()=>(0,t.jsx)("div",{className:"loading-container",children:(0,t.jsx)(l(),{type:"spin",color:"#000",height:50,width:50})})},4561:function(e,a,s){"use strict";s.d(a,{ModalReviewProvider:function(){return i},f:function(){return d}});var t=s(7437),r=s(2265);let l=(0,r.createContext)(void 0),i=e=>{let{children:a}=e,[s,i]=(0,r.useState)(null);return(0,t.jsx)(l.Provider,{value:{selectedOrder:s,openReview:e=>{i(e)},closeReview:()=>{i(null)}},children:a})},d=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useModalReviewContext must be used within a ModalReviewProvider");return e}},4061:function(e,a,s){"use strict";s.d(a,{I8:function(){return i},Sj:function(){return d},_n:function(){return r},c1:function(){return l},hi:function(){return n}});var t=s(3464);let r="https://thobias.ta-uogp.my.id",l="SB-Mid-client-5OBFIAQmrykHG7-9",i=t.Z.create({baseURL:"".concat(r,"/auth")}),d=t.Z.create({baseURL:"".concat(r,"/crud")}),n=t.Z.create({baseURL:"".concat(r,"/api")});t.Z.create({baseURL:"".concat(r,"/storage")})},393:function(e,a){"use strict";a.Z=e=>{let a=null==e?void 0:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");return"Rp. ".concat(a)}},6995:function(e,a,s){"use strict";var t=s(3011),r=s(6885),l=s(4061),i=s(8201);let d=async()=>await i.Z.getState().setToken(),n=(0,t.U)((0,r.mW)(e=>({dtOrders:{last_page:0,current_page:0,data:[]},setOrders:async a=>{let{user_id:s}=a;try{let a=await (0,l.hi)({method:"get",url:"/orders",headers:{Authorization:"Bearer ".concat(await d())},params:{user_id:s}});return e(e=>({...e,dtOrders:a.data.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setShowOrders:async a=>{try{let s=await (0,l.hi)({method:"get",headers:{Authorization:"Bearer ".concat(await d())},url:"/orders/".concat(a)});return e(e=>({...e,showOrder:s.data.data})),{status:"berhasil",data:s.data}}catch(e){return{status:"error",error:e.response.data}}},setOrdersAll:async a=>{let{user_id:s,status:t}=a;try{let a=await (0,l.hi)({method:"get",url:"/orders/all",headers:{Authorization:"Bearer ".concat(await d())},params:{user_id:s,status:t}});return e(e=>({...e,dtOrders:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}}})));a.Z=n},1398:function(e,a,s){"use strict";var t=s(3011),r=s(6885),l=s(4061),i=s(8201);let d=async()=>await i.Z.getState().setToken(),n=(0,t.U)((0,r.mW)(e=>({dtRecipients:{last_page:0,current_page:0,data:[]},setRecipients:async a=>{let{user_id:s}=a;try{let a=await (0,l.hi)({method:"get",url:"/recipients",headers:{Authorization:"Bearer ".concat(await d())},params:{user_id:s}});return e(e=>({...e,dtRecipients:a.data.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setShowRecipients:async a=>{try{let s=await (0,l.hi)({method:"get",headers:{Authorization:"Bearer ".concat(await d())},url:"/recipients/".concat(a)});return e(e=>({...e,showRecipient:s.data.data})),{status:"berhasil",data:s.data}}catch(e){return{status:"error",error:e.response.data}}},addData:async a=>{try{let s=await i.Z.getState().setToken(),t=await (0,l.hi)({method:"post",url:"/recipients",headers:{Authorization:"Bearer ".concat(s)},data:a});return e(e=>({dtRecipients:{last_page:e.dtRecipients.last_page,current_page:e.dtRecipients.current_page,data:[t.data.data,...e.dtRecipients.data]}})),{status:"berhasil tambah",data:t.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async a=>{try{let s=await i.Z.getState().setToken(),t=await (0,l.hi)({method:"delete",url:"/recipients/".concat(a),headers:{Authorization:"Bearer ".concat(s)}});return e(e=>({dtRecipients:{last_page:e.dtRecipients.last_page,current_page:e.dtRecipients.current_page,data:e.dtRecipients.data.filter(e=>e.id!==a)}})),{status:"berhasil hapus",data:t.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(a,s)=>{try{let t=await i.Z.getState().setToken(),r=await (0,l.hi)({method:"PUT",url:"/recipients/".concat(a),headers:{Authorization:"Bearer ".concat(t)},data:s});return e(e=>({dtRecipients:{last_page:e.dtRecipients.last_page,current_page:e.dtRecipients.current_page,data:e.dtRecipients.data.map(e=>e.id===a?{...e,...r.data.data}:e)}})),{status:"berhasil update",data:r.data}}catch(e){return{status:"error",data:e.response.data}}}})));a.Z=n},8201:function(e,a,s){"use strict";var t=s(3011),r=s(6885),l=s(4061),i=s(4131);let d=(0,t.U)((0,r.mW)((e,a)=>({setToken:async()=>i.Z.get("token"),setLogin:async e=>{try{let a=await (0,l.I8)({method:"post",url:"/login",data:e});return{status:"success",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setRegister:async e=>{try{let s=await (0,l.I8)({method:"post",url:"/register",data:e});return a().cekToken(),{status:"success",data:s.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let s=await a().setToken();try{let a=await (0,l.I8)({method:"post",url:"/cek_token",headers:{Authorization:"Bearer ".concat(s)}});return e(e=>({...e,dtUser:a.data})),{status:"success",data:a.data}}catch(a){return e(e=>({...e,dtUser:void 0})),{status:"error",error:a.response.data}}}})));a.Z=d},3488:function(e,a,s){"use strict";s.d(a,{w:function(){return r.a}});var t=s(7398),r=s.n(t);s(3702)},543:function(e,a,s){"use strict";var t=s(9064);a.Z=e=>{let{event:a,position:s}=e;switch(a.type){case"success":t.ZP.success(a.message,{duration:4e3,position:s});break;case"error":t.ZP.error(a.message,{duration:4e3,position:s})}}}},function(e){e.O(0,[990,803,447,474,64,501,497,971,117,744],function(){return e(e.s=1661)}),_N_E=e.O()}]);