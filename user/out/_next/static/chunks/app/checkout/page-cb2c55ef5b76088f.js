(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{7583:function(t,e,a){Promise.resolve().then(a.bind(a,3045))},7220:function(t,e,a){var r;r=function(t,e){"use strict";let a=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],r=()=>{};return function(s){function n(e){let r={},s={},n=a.map(t=>t.key);return Object.entries(e).forEach(e=>{let[a,i]=e;n.includes(a)&&t.isValidElement(i)?(r[a]=i,s[a]=" "):s[a]=i}),[r,s]}function i(t,r){Object.entries(r).forEach(r=>{let[n,i]=r,o=a.find(t=>t.key===n).getter(s),d=e.createRoot(o);d.render(i),t.__roots.push(d)})}function o(t){t.__roots.forEach(t=>{t.unmount()}),t.__roots=[]}return class extends s{static argsToParams(e){if(!(t.isValidElement(e[0])||t.isValidElement(e[1])))return s.argsToParams(e);{let t={};return["title","html","icon"].forEach((a,r)=>{void 0!==e[r]&&(t[a]=e[r])}),t}}_main(t,e){this.__roots=[],this.__params=Object.assign({},e,t);let[a,s]=n(this.__params),d=s.willOpen||r,c=s.didOpen||r,u=s.didDestroy||r;return super._main(Object.assign({},s,{willOpen:t=>{i(this,a),d(t)},didOpen:t=>{setTimeout(()=>{c(t)})},didDestroy:t=>{u(t),o(this)}}))}update(t){Object.assign(this.__params,t),o(this);let[e,a]=n(this.__params);super.update(a),i(this,e)}}}},t.exports=r(a(2265),a(4040))},3045:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return b}});var r=a(7437),s=a(4061),n=a(393),i=a(9764),o=a(1398),d=a(3011),c=a(6885),u=a(8201);let l=(0,d.U)((0,c.mW)(t=>({dtOrders:{last_page:0,current_page:0,data:[]},setOrders:async e=>{let{page:a=1,limit:r=10,search:n,sortby:i,order:o,status:d}=e;try{let e=await u.Z.getState().setToken(),c=await (0,s.Sj)({method:"get",url:"/orders",headers:{Authorization:"Bearer ".concat(e)},params:{limit:r,page:a,search:n,sortby:i,order:o,status:d}});return t(t=>({...t,dtOrders:c.data})),console.log({response:c}),{status:"berhasil",data:c.data}}catch(t){var c;return{status:"error",error:null===(c=t.response)||void 0===c?void 0:c.data}}},setShowOrders:async e=>{try{let a=await u.Z.getState().setToken(),r=await (0,s.Sj)({method:"get",url:"/orders/".concat(e),headers:{Authorization:"Bearer ".concat(a)}});return t(t=>({...t,dtOrders:r.data.data})),{status:"berhasil",data:r.data}}catch(t){var a;return{status:"error",error:null===(a=t.response)||void 0===a?void 0:a.data}}},addData:async e=>{try{let a=await u.Z.getState().setToken(),r=await (0,s.Sj)({method:"post",url:"/orders",headers:{Authorization:"Bearer ".concat(a)},data:e});return t(t=>({dtOrders:{last_page:t.dtOrders.last_page,current_page:t.dtOrders.current_page,data:[r.data.data,...t.dtOrders.data]}})),{status:r.data.type,data:r.data}}catch(t){return{status:"error",data:t.response.data}}},removeData:async e=>{try{let a=await u.Z.getState().setToken(),r=await (0,s.Sj)({method:"delete",url:"/orders/".concat(e),headers:{Authorization:"Bearer ".concat(a)}});return t(t=>({dtOrders:{last_page:t.dtOrders.last_page,current_page:t.dtOrders.current_page,data:t.dtOrders.data.filter(t=>t.id!==e)}})),{status:"berhasil hapus",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},updateData:async(e,a)=>{try{let r=await u.Z.getState().setToken(),n=await (0,s.Sj)({method:"PUT",url:"/orders/".concat(e),headers:{Authorization:"Bearer ".concat(r)},data:a});return t(t=>({dtOrders:{last_page:t.dtOrders.last_page,current_page:t.dtOrders.current_page,data:t.dtOrders.data.map(t=>t.id===e?{...t,...n.data.data}:t)}})),{status:"berhasil update",data:n.data}}catch(t){return{status:"error",data:t.response.data}}}})));var p=a(3464),h=a(3145),m=a(9376),g=a(2265),v=a(5515),f=a.n(v),y=a(7220),_=a.n(y),b=()=>{let{setCarts:t,dtCarts:e}=(0,i.Z)(),{setRecipients:a,dtRecipients:d}=(0,o.Z)(),{addData:c}=l(),[u,v]=(0,g.useState)(0),[y,b]=(0,g.useState)(0),[x,w]=(0,g.useState)(!1),[j,k]=(0,g.useState)(!1),B=(0,m.useRouter)();(0,g.useEffect)(()=>{var t,r;(null==e?void 0:null===(t=e.data[0])||void 0===t?void 0:t.user_id)&&a({user_id:null==e?void 0:null===(r=e.data[0])||void 0===r?void 0:r.user_id})},[e.data,a]),(0,g.useEffect)(()=>(v(e.data.reduce((t,e)=>{var a,r;return t+(null==e?void 0:e.quantity)*((null===(a=e.product_variant)||void 0===a?void 0:a.price)||(null===(r=e.product)||void 0===r?void 0:r.price)||0)},0)),(null==e?void 0:e.data.length)===0&&setTimeout(()=>{B.push("/account")},3e3),()=>{}),[e.data]),(0,g.useEffect)(()=>{var t,e,a;return b((null==d?void 0:null===(a=d.data)||void 0===a?void 0:null===(e=a[0])||void 0===e?void 0:null===(t=e.village)||void 0===t?void 0:t.shipping_cost)||0),()=>{}},[d.data]),(0,g.useEffect)(()=>{let t=document.createElement("script");return t.src="https://app.sandbox.midtrans.com/snap/snap.js",t.setAttribute("data-client-key",s.c1||""),t.onload=()=>w(!0),document.body.appendChild(t),()=>{document.body.removeChild(t)}},[]);let O=async a=>{k(!0);let r=u+y,s={user_id:null==a?void 0:a.user_id,village_id:null==a?void 0:a.village_id,nm_recipient:null==a?void 0:a.nm_recipient,phone:null==a?void 0:a.phone,address:null==a?void 0:a.address,shipping_cost:y,total_price:u,total_payment:r,status:"belum bayar",carts:e.data},n=await c(s);console.log({res:n}),"success"===n.status&&(C(n.data.data),await t({user_id:null==a?void 0:a.user_id})),k(!1)},C=async t=>{if(!x){alert("Snap.js is not loaded yet!");return}let e=(await p.Z.post("".concat(s._n,"/api/payment"),{order_id:t.id})).data;window.snap.pay(e,{onSuccess:function(t){console.log({result:t}),B.push("/account?history_order=success")},onPending:function(t){console.log({result:t}),B.push("/account?history_order=pending")},onError:function(t){console.log({result:t}),B.push("/account?history_order=error")},onClose:function(){console.log("user closed the popup"),B.push("/account?history_order=close")}})};return j?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-gray-900"})}):(0,r.jsx)("section",{className:"cart-block md:py-20 py-10",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("div",{className:"heading5 pb-3",children:"Checkout"}),(0,r.jsx)("div",{className:"list-product-checkout",children:e.data.length<1?(0,r.jsx)("p",{className:"text-button pt-3",children:"No product in cart"}):e.data.map(t=>{var e,a,i;let o=t.product_variant_id?t.product_variant.variant_img:null===(e=t.product.product_image.find(t=>t.is_main))||void 0===e?void 0:e.product_img,d=t.product_variant_id?t.product_variant.price:t.product.price;return(0,r.jsxs)("div",{className:"item flex items-center justify-between w-full pb-5 border-b border-line gap-6 mt-5",children:[(0,r.jsx)("div",{className:"bg-img w-[100px] aspect-square flex-shrink-0 rounded-lg overflow-hidden",children:(0,r.jsx)(h.default,{src:"".concat(s._n,"/").concat(o),width:500,height:500,alt:"img",className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"name text-title",children:t.product.product_nm}),(0,r.jsxs)("div",{className:"caption1 text-secondary mt-2",children:[(0,r.jsx)("span",{className:"size capitalize",children:null==t?void 0:null===(a=t.product_variant)||void 0===a?void 0:a.size}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)("span",{className:"color capitalize",children:null==t?void 0:null===(i=t.product_variant)||void 0===i?void 0:i.color})]})]}),(0,r.jsxs)("div",{className:"text-title",children:[(0,r.jsx)("span",{className:"quantity",children:t.quantity}),(0,r.jsx)("span",{className:"px-1",children:"x"}),(0,r.jsx)("span",{children:(0,n.Z)(d)})]})]})]},t.id)})}),(0,r.jsxs)("div",{className:"discount-block py-5 flex justify-between border-b border-line",children:[(0,r.jsx)("div",{className:"text-title",children:"Ongkir"}),(0,r.jsx)("div",{className:"text-title",children:(0,r.jsx)("span",{children:(0,n.Z)(y)})})]}),(0,r.jsxs)("div",{className:"ship-block py-5 flex justify-between border-b border-line",children:[(0,r.jsx)("div",{className:"text-title",children:"Belanja"}),(0,r.jsx)("div",{className:"text-title",children:(0,n.Z)(u)})]}),(0,r.jsxs)("div",{className:"total-cart-block pt-5 flex justify-between",children:[(0,r.jsx)("div",{className:"heading5",children:"Total"}),(0,r.jsx)("div",{className:"heading5 total-cart",children:(0,n.Z)(u+y)})]}),(0,r.jsx)("button",{type:"button",className:"button-main w-full text-center uppercase mt-6",onClick:()=>{let t=f().mixin({customClass:{confirmButton:"button-main mr-2",cancelButton:"button-main bg-secondary"},buttonsStyling:!1});_()(t).fire({title:"Buat Pesanan?",text:"Setelah Anda membuat pesanan, Anda tidak dapat mengubahnya.",showCancelButton:!0,confirmButtonText:"Buat",cancelButtonText:"Batal"}).then(t=>{if(t.isConfirmed){var e;O(null==d?void 0:null===(e=d.data)||void 0===e?void 0:e[0])}})},children:"Buat Pesanan"})]})})}},4061:function(t,e,a){"use strict";a.d(e,{I8:function(){return i},Sj:function(){return o},_n:function(){return s},c1:function(){return n},hi:function(){return d}});var r=a(3464);let s="https://thobias.ta-uogp.my.id",n="SB-Mid-client-5OBFIAQmrykHG7-9",i=r.Z.create({baseURL:"".concat(s,"/auth")}),o=r.Z.create({baseURL:"".concat(s,"/crud")}),d=r.Z.create({baseURL:"".concat(s,"/api")});r.Z.create({baseURL:"".concat(s,"/storage")})},393:function(t,e){"use strict";e.Z=t=>{let e=null==t?void 0:t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");return"Rp. ".concat(e)}},9764:function(t,e,a){"use strict";var r=a(3011),s=a(6885),n=a(4061),i=a(8201);let o=async()=>await i.Z.getState().setToken(),d=(0,r.U)((0,s.mW)(t=>({dtCarts:{last_page:0,current_page:0,data:[]},setCarts:async e=>{let{user_id:a}=e;try{let e=await (0,n.hi)({method:"get",url:"/carts",headers:{Authorization:"Bearer ".concat(await o())},params:{user_id:a}});return t(t=>({...t,dtCarts:e.data})),{status:"berhasil",data:e.data}}catch(t){return{status:"error",error:t.response.data}}},addCart:async t=>{let{product_id:e,product_variant_id:a,quantity:r=1,user_id:s}=t;try{let t=await (0,n.hi)({method:"POST",url:"/carts",headers:{Authorization:"Bearer ".concat(await o())},params:{product_id:e,product_variant_id:a,quantity:r}});return d.getState().setCarts({user_id:s}),{status:"berhasil",data:t.data}}catch(t){return{status:"error",error:t.response.data}}},costumeQuantity:async t=>{let{product_id:e,product_variant_id:a,quantity:r=1,user_id:s}=t;try{let t=await (0,n.hi)({method:"POST",url:"/carts/costumeQuantity",headers:{Authorization:"Bearer ".concat(await o())},params:{product_id:e,product_variant_id:a,quantity:r}});return d.getState().setCarts({user_id:s}),{status:"berhasil",data:t.data}}catch(t){return{status:"error",error:t.response.data}}},removeCarts:async t=>{let{user_id:e,id:a}=t;try{let t=await (0,n.hi)({method:"delete",url:"/carts",headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer ".concat(await o())},params:{user_id:e,id:a}});return d.getState().setCarts({user_id:e}),{status:"berhasil",data:t.data}}catch(t){return{status:"error",error:t.response.data}}}})));e.Z=d},1398:function(t,e,a){"use strict";var r=a(3011),s=a(6885),n=a(4061),i=a(8201);let o=async()=>await i.Z.getState().setToken(),d=(0,r.U)((0,s.mW)(t=>({dtRecipients:{last_page:0,current_page:0,data:[]},setRecipients:async e=>{let{user_id:a}=e;try{let e=await (0,n.hi)({method:"get",url:"/recipients",headers:{Authorization:"Bearer ".concat(await o())},params:{user_id:a}});return t(t=>({...t,dtRecipients:e.data.data})),{status:"berhasil",data:e.data}}catch(t){return{status:"error",error:t.response.data}}},setShowRecipients:async e=>{try{let a=await (0,n.hi)({method:"get",headers:{Authorization:"Bearer ".concat(await o())},url:"/recipients/".concat(e)});return t(t=>({...t,showRecipient:a.data.data})),{status:"berhasil",data:a.data}}catch(t){return{status:"error",error:t.response.data}}},addData:async e=>{try{let a=await i.Z.getState().setToken(),r=await (0,n.hi)({method:"post",url:"/recipients",headers:{Authorization:"Bearer ".concat(a)},data:e});return t(t=>({dtRecipients:{last_page:t.dtRecipients.last_page,current_page:t.dtRecipients.current_page,data:[r.data.data,...t.dtRecipients.data]}})),{status:"berhasil tambah",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},removeData:async e=>{try{let a=await i.Z.getState().setToken(),r=await (0,n.hi)({method:"delete",url:"/recipients/".concat(e),headers:{Authorization:"Bearer ".concat(a)}});return t(t=>({dtRecipients:{last_page:t.dtRecipients.last_page,current_page:t.dtRecipients.current_page,data:t.dtRecipients.data.filter(t=>t.id!==e)}})),{status:"berhasil hapus",data:r.data}}catch(t){return{status:"error",data:t.response.data}}},updateData:async(e,a)=>{try{let r=await i.Z.getState().setToken(),s=await (0,n.hi)({method:"PUT",url:"/recipients/".concat(e),headers:{Authorization:"Bearer ".concat(r)},data:a});return t(t=>({dtRecipients:{last_page:t.dtRecipients.last_page,current_page:t.dtRecipients.current_page,data:t.dtRecipients.data.map(t=>t.id===e?{...t,...s.data.data}:t)}})),{status:"berhasil update",data:s.data}}catch(t){return{status:"error",data:t.response.data}}}})));e.Z=d},8201:function(t,e,a){"use strict";var r=a(3011),s=a(6885),n=a(4061),i=a(4131);let o=(0,r.U)((0,s.mW)((t,e)=>({setToken:async()=>i.Z.get("token"),setLogin:async t=>{try{let e=await (0,n.I8)({method:"post",url:"/login",data:t});return{status:"success",data:e.data}}catch(t){return{status:"error",error:t.response.data}}},setRegister:async t=>{try{let a=await (0,n.I8)({method:"post",url:"/register",data:t});return e().cekToken(),{status:"success",data:a.data}}catch(t){return{status:"error",error:t.response.data}}},cekToken:async()=>{let a=await e().setToken();try{let e=await (0,n.I8)({method:"post",url:"/cek_token",headers:{Authorization:"Bearer ".concat(a)}});return t(t=>({...t,dtUser:e.data})),{status:"success",data:e.data}}catch(e){return t(t=>({...t,dtUser:void 0})),{status:"error",error:e.response.data}}}})));e.Z=o},4131:function(t,e,a){"use strict";function r(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)t[r]=a[r]}return t}a.d(e,{Z:function(){return s}});var s=function t(e,a){function s(t,s,n){if("undefined"!=typeof document){"number"==typeof(n=r({},a,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var o in n)n[o]&&(i+="; "+o,!0!==n[o]&&(i+="="+n[o].split(";")[0]));return document.cookie=t+"="+e.write(s,t)+i}}return Object.create({set:s,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var a=document.cookie?document.cookie.split("; "):[],r={},s=0;s<a.length;s++){var n=a[s].split("="),i=n.slice(1).join("=");try{var o=decodeURIComponent(n[0]);if(r[o]=e.read(i,o),t===o)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){s(t,"",r({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,r({},this.attributes,e))},withConverter:function(e){return t(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(t){t.O(0,[461,803,971,117,744],function(){return t(t.s=7583)}),_N_E=t.O()}]);